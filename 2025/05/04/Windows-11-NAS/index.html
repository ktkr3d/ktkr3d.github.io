<!DOCTYPE html><html lang="jp" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Windows 11 NAS | Memorandum!</title><meta name="author" content="ktkr3d"><meta name="copyright" content="ktkr3d"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="古いWindows 10 ProマシンをWindows 11 ProにアップグレードしてNASとして利用します。Windows 10のHDDはMBRフォーマットでしたのでGPTフォーマットのSSDに移行しました。しばらく利用しない時はリモートからスリープさせます。利用する際にはリモートからWake on LANで起動します。私の持っている外付けディスクケースは電源連動のさせ方が少し複雑でしたが設">
<meta property="og:type" content="article">
<meta property="og:title" content="Windows 11 NAS">
<meta property="og:url" content="https://ktkr3d.github.io/2025/05/04/Windows-11-NAS/index.html">
<meta property="og:site_name" content="Memorandum!">
<meta property="og:description" content="古いWindows 10 ProマシンをWindows 11 ProにアップグレードしてNASとして利用します。Windows 10のHDDはMBRフォーマットでしたのでGPTフォーマットのSSDに移行しました。しばらく利用しない時はリモートからスリープさせます。利用する際にはリモートからWake on LANで起動します。私の持っている外付けディスクケースは電源連動のさせ方が少し複雑でしたが設">
<meta property="og:locale">
<meta property="og:image" content="https://www.logitec.co.jp/products/hd/lhrbnu3/images/img_05.jpg">
<meta property="article:published_time" content="2025-05-04T05:15:49.000Z">
<meta property="article:modified_time" content="2025-05-04T13:28:19.000Z">
<meta property="article:author" content="ktkr3d">
<meta property="article:tag" content="nas">
<meta property="article:tag" content="windows">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.logitec.co.jp/products/hd/lhrbnu3/images/img_05.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Windows 11 NAS",
  "url": "https://ktkr3d.github.io/2025/05/04/Windows-11-NAS/",
  "image": "https://www.logitec.co.jp/products/hd/lhrbnu3/images/img_05.jpg",
  "datePublished": "2025-05-04T05:15:49.000Z",
  "dateModified": "2025-05-04T13:28:19.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "ktkr3d",
      "url": "https://ktkr3d.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://ktkr3d.github.io/2025/05/04/Windows-11-NAS/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-MG6LWTJBY0"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-MG6LWTJBY0')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-MG6LWTJBY0', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":false,"highlightLang":false,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'medium_zoom',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Windows 11 NAS',
  isHighlightShrink: undefined,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><script type="text/javascript" src="//www.google.com/jsapi"></script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/rss.xml" title="Memorandum!" type="application/rss+xml">
</head><body><div class="bg-animation" id="web_bg" style="background-color: rgb(227, 233, 199);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">490</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">201</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Memorandum!</span></a><a class="nav-page-title" href="/"><span class="site-name">Windows 11 NAS</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Windows 11 NAS</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-05-04T05:15:49.000Z" title="Created 2025-05-04 14:15:49">2025-05-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-05-04T13:28:19.000Z" title="Updated 2025-05-04 22:28:19">2025-05-04</time></span></div><div class="meta-secondline"></div></div></div><article class="container post-content" id="article-container"><p><img src="https://www.logitec.co.jp/products/hd/lhrbnu3/images/img_05.jpg"></p>
<p>古いWindows 10 ProマシンをWindows 11 ProにアップグレードしてNASとして利用します。Windows 10のHDDはMBRフォーマットでしたのでGPTフォーマットのSSDに移行しました。<br>しばらく利用しない時はリモートからスリープさせます。利用する際にはリモートからWake on LANで起動します。<br>私の持っている外付けディスクケースは電源連動のさせ方が少し複雑でしたが設定することにより安定して動作するようになりました。</p>
<span id="more"></span>

<h3 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h3><ul>
<li>Windows 10 Pro</li>
<li>外付けディスクケースLHR-4BNHEU3</li>
</ul>
<h3 id="Windows-10パーティションの移行"><a href="#Windows-10パーティションの移行" class="headerlink" title="Windows 10パーティションの移行"></a>Windows 10パーティションの移行</h3><p>MBR HDD上のWindowsシステムパーティションをGPT SSDのパーティションに移行します。</p>
<h4 id="HDDのWindowsパーティションサイズを変更"><a href="#HDDのWindowsパーティションサイズを変更" class="headerlink" title="HDDのWindowsパーティションサイズを変更"></a>HDDのWindowsパーティションサイズを変更</h4><p>パーティションを移動しやすいようにLinuxのgpartedでWindows 10のシステムパーティションを適当なサイズに縮小します。(例えば60,000MiB)<br>NTFSパーティションのコピーにCloneZillaを使う場合は不要な操作と思います。</p>
<h4 id="Windowsパーティションの修復"><a href="#Windowsパーティションの修復" class="headerlink" title="Windowsパーティションの修復"></a>Windowsパーティションの修復</h4><p>一旦、Windowsでディスクを修復しておきます。（重要）<br>Windowsからは中身が正常に見えますがLinuxでは中身が参照できないという状態を回復できます。</p>
<h4 id="SSDをGPTフォーマット"><a href="#SSDをGPTフォーマット" class="headerlink" title="SSDをGPTフォーマット"></a>SSDをGPTフォーマット</h4><p>LinuxのgpartedでSSDをGPTフォーマットして各パーティションを作成</p>
<ul>
<li>EFI用<br>fat32&#x2F;1000MiB</li>
<li>Windows用<br>ntfs&#x2F;60000MiB</li>
</ul>
<h4 id="Windowsパーティションのコピー"><a href="#Windowsパーティションのコピー" class="headerlink" title="Windowsパーティションのコピー"></a>Windowsパーティションのコピー</h4><p>HDDのパーティションをSSDのパーティションにコピー</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/sdbX of=/dev/sdaX bs=4M status=progress</span><br></pre></td></tr></table></figure>
<h4 id="パーティションの拡大"><a href="#パーティションの拡大" class="headerlink" title="パーティションの拡大"></a>パーティションの拡大</h4><p>gpartedでSSDのWindowsシステムパーティションを拡大</p>
<h3 id="Windows-10のUEFIブート設定"><a href="#Windows-10のUEFIブート設定" class="headerlink" title="Windows 10のUEFIブート設定"></a>Windows 10のUEFIブート設定</h3><h4 id="EFIパーティションの構築"><a href="#EFIパーティションの構築" class="headerlink" title="EFIパーティションの構築"></a>EFIパーティションの構築</h4><p>Windows 10 インストーラディスクでブートしてトラブルシュートからコマンドプロンプトを実行</p>
<ul>
<li>EFIパーティションにドライブ文字Nをマッピング<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">diskpart</span><br></pre></td></tr></table></figure>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">List disk</span><br><span class="line">select disk n</span><br><span class="line">list volume</span><br><span class="line">select volume m</span><br><span class="line">assign letter=N:</span><br><span class="line"><span class="keyword">Exit</span></span><br></pre></td></tr></table></figure>
nはディスク番号(例: 0)、mはEFIパーティション番号</li>
<li>ドライブNをfat32でフォーマット<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="built_in">format</span> N: /<span class="built_in">FS</span>:FAT32</span><br></pre></td></tr></table></figure></li>
<li>ブートマネージャの設定<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">bcdboot C:\windows /s N: /f UEFI</span><br></pre></td></tr></table></figure></li>
<li>ブートローダの修復<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">bootrec /fixboot</span><br></pre></td></tr></table></figure>
エラーがでないことを確認</li>
</ul>
<h4 id="確認"><a href="#確認" class="headerlink" title="確認"></a>確認</h4><p>BIOSの設定をUEFI起動に切り替えてWindows 10が起動できることを確認</p>
<h3 id="Windows-11にアップグレード"><a href="#Windows-11にアップグレード" class="headerlink" title="Windows 11にアップグレード"></a>Windows 11にアップグレード</h3><ul>
<li>Windows 10で起動してWindows 11 インストーラISOをマウント</li>
<li>インストール実行<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">setup /product server</span><br></pre></td></tr></table></figure>
インストール中、1つ目の「個人用ファイルとアプリを引き継ぐ」を選択するとエラーがでたので２つ目の「個人用ファイルを引き継ぐ」を選択（アプリはひきつがない）</li>
</ul>
<h3 id="ディスクケースとPCの電源連動"><a href="#ディスクケースとPCの電源連動" class="headerlink" title="ディスクケースとPCの電源連動"></a>ディスクケースとPCの電源連動</h3><h4 id="ディスクケース側の電源連動モード設定"><a href="#ディスクケース側の電源連動モード設定" class="headerlink" title="ディスクケース側の電源連動モード設定"></a>ディスクケース側の電源連動モード設定</h4><ul>
<li>LHR-4BNHEU3のSYNCボタンを3秒間押して電源連動スリープ機能を有効に設定<br>電源連動 LED（SYNC）がオレンジになることを確認</li>
<li>パソコンが電源オフ&#x2F;スリープになるとディスクケースがスリープ状態になります。</li>
</ul>
<h4 id="Windows側の電源管理設定"><a href="#Windows側の電源管理設定" class="headerlink" title="Windows側の電源管理設定"></a>Windows側の電源管理設定</h4><ul>
<li>デバイスマネージャから「ユニバーサルシリアルバスコントローラー」の下の「USB大容量記憶装置」のプロパティで「電源管理」タブの「電力の節約のために、コンピュータでこのデバイスの電源をオフにできるようにする」をオフ</li>
</ul>
<h3 id="Windowsの自動スリープ抑止"><a href="#Windowsの自動スリープ抑止" class="headerlink" title="Windowsの自動スリープ抑止"></a>Windowsの自動スリープ抑止</h3><h4 id="電源設定"><a href="#電源設定" class="headerlink" title="電源設定"></a>電源設定</h4><p>スリープ状態になるまでの時間を「なし」に設定</p>
<h4 id="無人スリープタイムアウトの設定"><a href="#無人スリープタイムアウトの設定" class="headerlink" title="無人スリープタイムアウトの設定"></a>無人スリープタイムアウトの設定</h4><ul>
<li>無人スリープタイムアウトの設定項目表示<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">powercfg -attributes SUB_SLEEP <span class="number">7</span>bc4a2f9-d8fc-<span class="number">4469</span>-b07b-<span class="number">33</span>eb785aaca0 -ATTRIB_HIDE</span><br></pre></td></tr></table></figure></li>
<li>電源オプションの「システム無人スリープタイムアウト」で2分→0分</li>
</ul>
<h4 id="モダンスタンバイの状態確認"><a href="#モダンスタンバイの状態確認" class="headerlink" title="モダンスタンバイの状態確認"></a>モダンスタンバイの状態確認</h4><ul>
<li>Windowsの電源設定を確認<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">powercfg /a</span><br></pre></td></tr></table></figure>
「スタンバイ（S0 低電力アイドル）」が利用できない状態であることを確認</li>
</ul>
<h3 id="Wake-on-LAN"><a href="#Wake-on-LAN" class="headerlink" title="Wake on LAN"></a>Wake on LAN</h3><h4 id="サーバ"><a href="#サーバ" class="headerlink" title="サーバ"></a>サーバ</h4><p>UEFI設定のブートメニューでWake on LANを有効化</p>
<h4 id="クライアントWindows"><a href="#クライアントWindows" class="headerlink" title="クライアントWindows"></a>クライアントWindows</h4><ul>
<li>インストール<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">winget install --id DarkfullDante.wol </span><br></pre></td></tr></table></figure></li>
<li>実行<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">wol -m=&quot;XX:XX:XX:XX:XX:XX&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="クライアントUbuntu"><a href="#クライアントUbuntu" class="headerlink" title="クライアントUbuntu"></a>クライアントUbuntu</h4><ul>
<li>インストール<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install wakeonlan</span><br></pre></td></tr></table></figure></li>
<li>実行<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wakeonlan wakeonlan XX:XX:XX:XX:XX:XX</span><br></pre></td></tr></table></figure></li>
</ul>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/windows/">windows</a><a class="post-meta__tags" href="/tags/nas/">nas</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/05/19/Reflector/" title="Reflector"><img class="cover" src="/images/reflector.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Reflector</div></div><div class="info-2"><div class="info-item-1"> Reflectorを利用してArch Linuxのミラーリストを週次で自動更新するように設定します。タイマーreflector.timerが週次でreflector.serviceをキックします。即時実行したい場合はreflector.serviceを開始(start)します。 https://man.archlinux.org/man/reflector.1https://wiki.archlinux.jp/index.php/Reflector   環境 Arch Linux Reflector 2023-3  関連ファイル Reflectorの設定ファイル/etc/xdg/reflector/reflector.conf Arch Linuxのミラーリスト/etc/pacman.d/mirrorlist  構築 reflectorをインストール    sudo pacman -S reflector   設定  JapanにあるHTTPSミラーの内、最近同期した上位5サイトをダウンロード速度(rate)で並べ替えます。    &#x2F;etc&#x2F;xdg&#x2F...</div></div></div></a><a class="pagination-related" href="/2025/04/06/WireGuard-Easy-wg-easy/" title="WireGuard Easy (wg-easy)"><img class="cover" src="https://www.logo.wine/a/logo/WireGuard/WireGuard-Icon-Logo.wine.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">WireGuard Easy (wg-easy)</div></div><div class="info-2"><div class="info-item-1">WireGuard Easy(wg-easy)でVPN環境を構築してみました。Dockerであることと設定に必要な項目が少ないことから構築で迷うことはありません。細かな制御をしたい場合は設定ファイルを直接編集するようなことが必要かもしれません。      環境  Raspberry Pi 4B Ubuntu 24.10 (arm64) docker 2.0.4 Portainer Community Edition 2.27.3 LTS WireGuard Easy (wg-easy) v14.0.0 v6プラス回線  構築v6プラス回線の調査 公開IPv4アドレスと公開IPv6アドレスを確認  https://test-ipv6.com/ 公開IPv6アドレスから公開可能なポート番号を確認  http://ipv4.web.fc2.com/map-e.html 公開ポート番号を決定  例えば60000&#x2F;udp    wireguardの使用プロトコルはudpです。   wireguardを構築するサーバのローカルIPアドレスを確認    ip a   例えば192.1...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/10/22/Windows-11-WSL-2-systemd/" title="Windows 11 - WSL 2 - systemd"><img class="cover" src="/images/wsl2_systemd.drawio.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-22</div><div class="info-item-2">Windows 11 - WSL 2 - systemd</div></div><div class="info-2"><div class="info-item-1"> Windows 11 のWSL でsystemd を有効にしてみました。構成がすっきりしました。   環境まず、現在PC で構築しているサービスを整理します。 WSL で構築するサービス Pritunl (VPN、systemd で起動管理) Code-server (IDE、systemd で起動管理) Hexo (Blog、コマンドで実行)  Windows で構築するサービス EPGStation (番組表&#x2F;番組予約) Mirakurun (チューナ)  WSL 構築 systemd の有効化   設定/etc/wsl.conf[boot]systemd=true 一旦、WSL をシャットダウン(or 対象ディストリビューションをターミネート)   ポートフォワードの設定   PowerShell スクリプトwsl-proxy.ps1$WSL2_IPV4=bash -c &quot;ip route | grep &#x27;eth0 proto kernel scope&#x27; | cut -d &#x27; &#x27; -f9&quot;$HOST_I...</div></div></div></a><a class="pagination-related" href="/2017/04/18/Be-Careful-using-Ext2Fsd/" title="Be Careful using Ext2Fsd"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2017-04-18</div><div class="info-item-2">Be Careful using Ext2Fsd</div></div><div class="info-2"><div class="info-item-1">https://askubuntu.com/questions/849872/how-can-i-prevent-windows-10-from-corrupting-the-ext4-superblock-every-timeWindows を再起動した後にUbuntu 16.10 やUbuntu 17.04 が起動しなくなってしまいました。Ubuntu 16.04 は問題無かったので不思議に思っていたところ原因がわかりました。  事象Ext2Fsd はWindows からExt4 パーティションにアクセスできるようになるとても便利なドライバです。私はExt2Fsd をWindows10 に入れていましたが、Windows を再起動した後にext4パーティションが壊れる場合があることに気が付きました。    対象 結果    昔作ったデータ用のext4 パーティション群 問題なし   Ubuntu 16.04 のext4 パーティション 問題なし   Ubuntu 16.10 のext4 パーティション 壊れた   Ubuntu 17.04 のext4 パーティション 壊れた ...</div></div></div></a><a class="pagination-related" href="/2025/01/23/tray-launcher/" title="tray-launcher"><img class="cover" src="/images/tray-launcher.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-23</div><div class="info-item-2">tray-launcher</div></div><div class="info-2"><div class="info-item-1">Windowsのタスクトレイからスクリプトを実行できるランチャーです。GNOME Shell ExtensionのArgosのような使い方ができて便利です。 https://github.com/Jayich-Lab/tray-launcher 2025-02-25起動時にPythonのウィンドウが開きっぱなしになってしまうことがあった。まだ報告されていないようだ。複数の環境で発生したが、再現性はないかもしれない。https://github.com/Jayich-Lab/tray-launcher/issues 以下のソフトが動作したので取り急ぎ切り替えた。https://github.com/zozonteq/task-tray-launcher 自分でPowerShellで作るのもよいかもしれない。 2025-02-25作ってみました。https://ktkr3d.github.io/2025/02/25/Script-Launcher/   環境 Windows 11 python 3.13.1 pip 24.3.1 tray-launcher v1.0.9  構築 イン...</div></div></div></a><a class="pagination-related" href="/2025/02/24/GlazeWM/" title="GlazeWM"><img class="cover" src="/images/glazewm_windhawk.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-24</div><div class="info-item-2">GlazeWM</div></div><div class="info-2"><div class="info-item-1"> Windows用のタイリングウィンドウマネージャGlazeWMを試してみました。挙動に癖が無くて安定していそうなので切り替えました。 https://github.com/glzr-io/glazewm   環境 Windows 11 24H2 GlazeWM v3.8.1  構築 インストール    winget install GlazeWM  起動  スタートメニューからGlazeWMを起動 環境設定   設定ファイルは%userprofile%\.glzr\glazewm\config.yaml。トレイアイコンを右クリックしてShow config folderでフォルダを表示できます。 上部のバーを起動しないようにする。%userprofile%\.glzr\glazewm\config.yamlgeneral:  # Commands to run when the WM has started. This is useful for running a  # script or launching another application.  # Example: ...</div></div></div></a><a class="pagination-related" href="/2023/08/08/CHUWI-Minibook-X-N100/" title="CHUWI MiniBook X N100"><img class="cover" src="https://ae01.alicdn.com/kf/S26d8f55afec54e329da770e143340e3ac.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-08</div><div class="info-item-2">CHUWI MiniBook X N100</div></div><div class="info-2"><div class="info-item-1">https://store.chuwi.jp/products/minibook-x-n100CHUWI MiniBook X N100が届いたから環境設定と動作確認をしてみよう。 2023&#x2F;11&#x2F;06 更新Kernel 6.6-rc5 を導入するとサスペンドからの復帰時の画面の乱れは解消した。ただし、Bluetooth が無効になったので以下のようにシンボリックリンクを張り直す必要があった。 cd /usr/lib/firmware/intel/sudo unlink ibt-0040-4150.ddc.zstsudo unlink ibt-1040-4150.ddc.zstsudo ln -s ibt-1040-4150.ddc.zst ibt-0040-1050.ddc.zstsudo ln -s ibt-1040-4150.sfi.zst ibt-0040-1050.sfi.zst  2023&#x2F;11&#x2F;15 更新Kernel 6.6.1 とlinux-firmware が更新された。こちらは問題なさそう。  Ubuntumainlin...</div></div></div></a><a class="pagination-related" href="/2025/01/29/Vertical-Taskbar-for-Windows-11/" title="Vertical Taskbar for Windows 11"><img class="cover" src="/images/windhawk_vertical_taskbar.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-29</div><div class="info-item-2">Vertical Taskbar for Windows 11</div></div><div class="info-2"><div class="info-item-1"> Vertical Taskbar for Windows 11はWindows 11でタスクバーを左側や右側に配置できるWindhawkのmodです。ExplorerPatcherよりもWindows 11に対する親和性が高そうです。 https://windhawk.net/mods/taskbar-verticalhttps://windhawk.net/https://github.com/microsoft/PowerToys/issues/25101#issuecomment-2364732359 2025-02-27 メモWindhawkとVirtualBoxが干渉してVirtualBoxのVM起動時に「supHardenedWinVerifyProcess failed」エラーが発生する。https://github.com/ramensoftware/windhawk/issues/25Windhawkの設定→詳細設定→さらに詳細設定を表示→プロセス除外リストに以下を追加する。 %ProgramFiles%\Oracle\VirtualBox\* 上記対応後、V...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">ktkr3d</div><div class="author-info-description">Memorandum</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">490</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">201</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ktkr3d"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/ktkr3d" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://gist.github.com/ktkr3d" target="_blank" title="Gist"><i class="fas fa-code" style="color: #24292e;"></i></a><a class="social-icon" href="https://x.com/ktkr3d" target="_blank" title="X"><i class="fab fa-x-twitter" style="color: #24292e;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%92%B0%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">環境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-10%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E7%A7%BB%E8%A1%8C"><span class="toc-number">2.</span> <span class="toc-text">Windows 10パーティションの移行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HDD%E3%81%AEWindows%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%B5%E3%82%A4%E3%82%BA%E3%82%92%E5%A4%89%E6%9B%B4"><span class="toc-number">2.1.</span> <span class="toc-text">HDDのWindowsパーティションサイズを変更</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E4%BF%AE%E5%BE%A9"><span class="toc-number">2.2.</span> <span class="toc-text">Windowsパーティションの修復</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSD%E3%82%92GPT%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88"><span class="toc-number">2.3.</span> <span class="toc-text">SSDをGPTフォーマット</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E3%82%B3%E3%83%94%E3%83%BC"><span class="toc-number">2.4.</span> <span class="toc-text">Windowsパーティションのコピー</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E6%8B%A1%E5%A4%A7"><span class="toc-number">2.5.</span> <span class="toc-text">パーティションの拡大</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-10%E3%81%AEUEFI%E3%83%96%E3%83%BC%E3%83%88%E8%A8%AD%E5%AE%9A"><span class="toc-number">3.</span> <span class="toc-text">Windows 10のUEFIブート設定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#EFI%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E6%A7%8B%E7%AF%89"><span class="toc-number">3.1.</span> <span class="toc-text">EFIパーティションの構築</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A2%BA%E8%AA%8D"><span class="toc-number">3.2.</span> <span class="toc-text">確認</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-11%E3%81%AB%E3%82%A2%E3%83%83%E3%83%97%E3%82%B0%E3%83%AC%E3%83%BC%E3%83%89"><span class="toc-number">4.</span> <span class="toc-text">Windows 11にアップグレード</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%83%87%E3%82%A3%E3%82%B9%E3%82%AF%E3%82%B1%E3%83%BC%E3%82%B9%E3%81%A8PC%E3%81%AE%E9%9B%BB%E6%BA%90%E9%80%A3%E5%8B%95"><span class="toc-number">5.</span> <span class="toc-text">ディスクケースとPCの電源連動</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%87%E3%82%A3%E3%82%B9%E3%82%AF%E3%82%B1%E3%83%BC%E3%82%B9%E5%81%B4%E3%81%AE%E9%9B%BB%E6%BA%90%E9%80%A3%E5%8B%95%E3%83%A2%E3%83%BC%E3%83%89%E8%A8%AD%E5%AE%9A"><span class="toc-number">5.1.</span> <span class="toc-text">ディスクケース側の電源連動モード設定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows%E5%81%B4%E3%81%AE%E9%9B%BB%E6%BA%90%E7%AE%A1%E7%90%86%E8%A8%AD%E5%AE%9A"><span class="toc-number">5.2.</span> <span class="toc-text">Windows側の電源管理設定</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows%E3%81%AE%E8%87%AA%E5%8B%95%E3%82%B9%E3%83%AA%E3%83%BC%E3%83%97%E6%8A%91%E6%AD%A2"><span class="toc-number">6.</span> <span class="toc-text">Windowsの自動スリープ抑止</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%BB%E6%BA%90%E8%A8%AD%E5%AE%9A"><span class="toc-number">6.1.</span> <span class="toc-text">電源設定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%84%A1%E4%BA%BA%E3%82%B9%E3%83%AA%E3%83%BC%E3%83%97%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%A2%E3%82%A6%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A"><span class="toc-number">6.2.</span> <span class="toc-text">無人スリープタイムアウトの設定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%A2%E3%83%80%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%83%90%E3%82%A4%E3%81%AE%E7%8A%B6%E6%85%8B%E7%A2%BA%E8%AA%8D"><span class="toc-number">6.3.</span> <span class="toc-text">モダンスタンバイの状態確認</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Wake-on-LAN"><span class="toc-number">7.</span> <span class="toc-text">Wake on LAN</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%B5%E3%83%BC%E3%83%90"><span class="toc-number">7.1.</span> <span class="toc-text">サーバ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88Windows"><span class="toc-number">7.2.</span> <span class="toc-text">クライアントWindows</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88Ubuntu"><span class="toc-number">7.3.</span> <span class="toc-text">クライアントUbuntu</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/29/oUF-MyLayout-Addon/" title="oUF MyLayout Addon">oUF MyLayout Addon</a><time datetime="2025-12-29T12:51:56.000Z" title="Created 2025-12-29 21:51:56">2025-12-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/21/Prism-Launcher/" title="Prism Launcher">Prism Launcher</a><time datetime="2025-12-21T12:31:02.000Z" title="Created 2025-12-21 21:31:02">2025-12-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/21/Systemd-user-timer/" title="Systemd user timer">Systemd user timer</a><time datetime="2025-12-20T18:59:19.000Z" title="Created 2025-12-21 03:59:19">2025-12-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/06/Faugus-Launcher/" title="Faugus Launcher">Faugus Launcher</a><time datetime="2025-12-06T06:14:20.000Z" title="Created 2025-12-06 15:14:20">2025-12-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/01/SDDM/" title="SDDM">SDDM</a><time datetime="2025-12-01T08:35:57.000Z" title="Created 2025-12-01 17:35:57">2025-12-01</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/travel.png);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2010 - 2026 By ktkr3d</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null
  const getUtterancesTheme = theme => theme === 'dark' ? 'photon-dark' : 'github-light'

  const loadUtterances = (el = document, key) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyUtterances = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const config = {
      src: 'https://utteranc.es/client.js',
      repo: 'ktkr3d/ktkr3d.github.io',
      theme: getUtterancesTheme(document.documentElement.getAttribute('data-theme')),
      crossorigin: 'anonymous',
      async: true,
      ...option,
      'issue-term': isShuoshuo ? key : (option && option['issue-term']) || 'pathname'
    }

    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => ele.setAttribute(key, value))
    el.querySelector('#utterances-wrap').appendChild(ele)
  }

  const changeUtterancesTheme = theme => {
    const iframe = document.querySelector('#utterances-wrap iframe')
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: getUtterancesTheme(theme)
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es')
    }
  }

  btf.addGlobalFn('themeChange', changeUtterancesTheme, 'utterances')

  if (isShuoshuo) {
    'Utterances' === 'Utterances'
      ? window.shuoshuoComment = { loadComment: loadUtterances }
      : window.loadOtherComment = loadUtterances
    return
  }
  
  if ('Utterances' === 'Utterances' || !false) {
    if (false) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
    else loadUtterances()
  } else {
    window.loadOtherComment = loadUtterances
  }
})()</script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="local-search-input"><input placeholder="Search for Posts" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>