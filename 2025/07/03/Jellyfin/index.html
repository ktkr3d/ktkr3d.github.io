<!DOCTYPE html><html lang="jp" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Jellyfin | Memorandum!</title><meta name="author" content="ktkr3d"><meta name="copyright" content="ktkr3d"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="メディアサーバJellyfinを使ってみました。今まで散らばっていた大量のメディアファイルを整理することができました。また、インターネットラジオやMirakurunと連携したテレビ番組の視聴ができました。                                     Jellyfin             The Free Software Media System  2025-12-">
<meta property="og:type" content="article">
<meta property="og:title" content="Jellyfin">
<meta property="og:url" content="https://ktkr3d.github.io/2025/07/03/Jellyfin/index.html">
<meta property="og:site_name" content="Memorandum!">
<meta property="og:description" content="メディアサーバJellyfinを使ってみました。今まで散らばっていた大量のメディアファイルを整理することができました。また、インターネットラジオやMirakurunと連携したテレビ番組の視聴ができました。                                     Jellyfin             The Free Software Media System  2025-12-">
<meta property="og:locale">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/4/41/Jellyfin_-_icon-transparent.svg">
<meta property="article:published_time" content="2025-07-03T11:14:43.000Z">
<meta property="article:modified_time" content="2025-12-15T07:24:48.003Z">
<meta property="article:author" content="ktkr3d">
<meta property="article:tag" content="jellyfin">
<meta property="article:tag" content="mirakurun">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/4/41/Jellyfin_-_icon-transparent.svg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Jellyfin",
  "url": "https://ktkr3d.github.io/2025/07/03/Jellyfin/",
  "image": "https://upload.wikimedia.org/wikipedia/commons/4/41/Jellyfin_-_icon-transparent.svg",
  "datePublished": "2025-07-03T11:14:43.000Z",
  "dateModified": "2025-12-15T07:24:48.003Z",
  "author": [
    {
      "@type": "Person",
      "name": "ktkr3d",
      "url": "https://ktkr3d.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://ktkr3d.github.io/2025/07/03/Jellyfin/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-MG6LWTJBY0"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-MG6LWTJBY0')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-MG6LWTJBY0', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":false,"highlightLang":false,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'medium_zoom',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Jellyfin',
  isHighlightShrink: undefined,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><script type="text/javascript" src="//www.google.com/jsapi"></script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/rss.xml" title="Memorandum!" type="application/rss+xml">
</head><body><div class="bg-animation" id="web_bg" style="background-color: rgb(227, 233, 199);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">489</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">199</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Memorandum!</span></a><a class="nav-page-title" href="/"><span class="site-name">Jellyfin</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Jellyfin</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-07-03T11:14:43.000Z" title="Created 2025-07-03 20:14:43">2025-07-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-12-15T07:24:48.003Z" title="Updated 2025-12-15 16:24:48">2025-12-15</time></span></div><div class="meta-secondline"></div></div></div><article class="container post-content" id="article-container"><p>メディアサーバJellyfinを使ってみました。今まで散らばっていた大量のメディアファイルを整理することができました。<br>また、インターネットラジオやMirakurunと連携したテレビ番組の視聴ができました。</p>
<a href="https://jellyfin.org/" target="_blank" rel="external nofollow noopener noreferrer" class="link-preview">
    <div class="og-image">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Jellyfin_-_icon-transparent.svg" alt="Jellyfin" class="not-gallery-item" loading="lazy"></div>
        <div class="descriptions">
            <div class="og-title">Jellyfin</div>
            <div class="og-description">The Free Software Media System</div></div></a>

<h4 id="2025-12-14"><a href="#2025-12-14" class="headerlink" title="2025-12-14"></a>2025-12-14</h4><ul>
<li>v2.0.0 - Rename to Jellyfin Desktop &#x2F; Upgrade to Qt 6<br><a target="_blank" rel="noopener" href="https://github.com/jellyfin/jellyfin-desktop/releases/tag/v2.0.0">https://github.com/jellyfin/jellyfin-desktop/releases/tag/v2.0.0</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">paru -S jellyfin-desktop</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hyprctl clients | grep class</span><br><span class="line">class: org.jellyfin.JellyfinDesktop</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2025-12-07"><a href="#2025-12-07" class="headerlink" title="2025-12-07"></a>2025-12-07</h4><p><a target="_blank" rel="noopener" href="https://github.com/jellyfin/jellyfin/issues/15419">https://github.com/jellyfin/jellyfin/issues/15419</a><br><a target="_blank" rel="noopener" href="https://github.com/jellyfin/jellyfin/pull/15557">https://github.com/jellyfin/jellyfin/pull/15557</a><br>インターネットラジオが再生されなくなったバグが10.11.4で修正されたようです。<br>アップデートして動作することを確認しました。</p>
<h4 id="2025-11-29"><a href="#2025-11-29" class="headerlink" title="2025-11-29"></a>2025-11-29</h4><ul>
<li>JellyfinでライブTV視聴の是正<br><a target="_blank" rel="noopener" href="https://www.hitoha.moe/fix-jellyfin-live-tv/">https://www.hitoha.moe/fix-jellyfin-live-tv/</a><figure class="highlight bash"><figcaption><span>/etc/jellyfin/jellyfin.env</span></figcaption><table><tr><td class="code"><pre><span class="line">JELLYFIN_FFmpeg__probesize=8M</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2025-11-26"><a href="#2025-11-26" class="headerlink" title="2025-11-26"></a>2025-11-26</h4><ul>
<li>MPRIS supported!<br><a target="_blank" rel="noopener" href="https://github.com/jellyfin/jellyfin-media-player/pull/989">https://github.com/jellyfin/jellyfin-media-player/pull/989</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">paru -S jellyfin-media-player-git</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2025-11-24"><a href="#2025-11-24" class="headerlink" title="2025-11-24"></a>2025-11-24</h4><ul>
<li>qt6 version<br><a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/jellyfin-media-player-git">https://aur.archlinux.org/packages/jellyfin-media-player-git</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">paru -S jellyfin-media-player-git</span><br></pre></td></tr></table></figure>
現時点でmpv-mprisと組み合わせて使えていない。</li>
</ul>
<h4 id="2025-11-22"><a href="#2025-11-22" class="headerlink" title="2025-11-22"></a>2025-11-22</h4><ul>
<li>Media keys (mpris) support<br><a target="_blank" rel="noopener" href="https://github.com/jellyfin/jellyfin-media-player/issues/3">https://github.com/jellyfin/jellyfin-media-player/issues/3</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -L https://github.com/hoyon/mpv-mpris/releases/latest/download/mpris.so -o ~/.local/share/jellyfinmediaplayer/scripts/mpris.so</span><br></pre></td></tr></table></figure></li>
</ul>
<span id="more"></span>

<h3 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h3><p>WSLのUbuntuにJellyfinを導入します。</p>
<ul>
<li>Windows 11<ul>
<li>Mirakurun 3.9.0 rc4</li>
<li>WSL (Ubuntu 24.04.2 LTS)<ul>
<li>Jellyfin 10.10.7</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="構築"><a href="#構築" class="headerlink" title="構築"></a>構築</h3><h4 id="サーバ（WSL-Ubuntu）"><a href="#サーバ（WSL-Ubuntu）" class="headerlink" title="サーバ（WSL&#x2F;Ubuntu）"></a>サーバ（WSL&#x2F;Ubuntu）</h4><ul>
<li>Jellyfin インストール<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl https://repo.jellyfin.org/install-debuntu.sh | <span class="built_in">sudo</span> bash</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> --now jellyfin</span><br></pre></td></tr></table></figure></li>
<li>別のマシンからアクセスできるようにWSLへのポートフォワード設定一覧に8096&#x2F;tcpを追加します。PC起動時に実行するようにスケジュールします。<figure class="highlight ps1"><figcaption><span>wsl-proxy.ps1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="variable">$WSL2_IPV4</span>=bash <span class="literal">-c</span> <span class="string">&quot;ip route | grep &#x27;eth0 proto kernel scope&#x27; | cut -d &#x27; &#x27; -f9&quot;</span></span><br><span class="line"><span class="variable">$HOST_IPV4</span>=<span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="variable">$PORTS</span>=<span class="selector-tag">@</span>(<span class="number">22</span>,<span class="number">443</span>,<span class="number">2049</span>,<span class="number">3030</span>,<span class="number">4000</span>,<span class="number">8000</span>,<span class="number">8080</span>,<span class="number">8081</span>,<span class="number">8096</span>,<span class="number">8443</span>,<span class="number">9090</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$PORT</span> <span class="keyword">in</span> <span class="variable">$PORTS</span>)</span><br><span class="line">&#123;</span><br><span class="line">    netsh interface portproxy delete v4tov4 listenaddress=<span class="variable">$HOST_IPV4</span> listenport=<span class="variable">$PORT</span></span><br><span class="line">    netsh interface portproxy add v4tov4 listenaddress=<span class="variable">$HOST_IPV4</span> listenport=<span class="variable">$PORT</span> connectaddress=<span class="variable">$WSL2_IPV4</span> connectport=<span class="variable">$PORT</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ポート プロキシ パラメーターをすべて表示するには以下を実行する。</span></span><br><span class="line"><span class="comment"># netsh interface portproxy show all</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ポート番号を削除するには該当ポート番号を対象に個別にdeleteコマンドを実行する。</span></span><br><span class="line"><span class="comment"># netsh interface portproxy delete v4tov4 listenaddress=$HOST_IPV4 listenport=$PORT</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="クライアント"><a href="#クライアント" class="headerlink" title="クライアント"></a>クライアント</h4><ul>
<li>クライアントアプリの選択<br><a target="_blank" rel="noopener" href="https://github.com/awesome-jellyfin/awesome-jellyfin/blob/main/CLIENTS.md">https://github.com/awesome-jellyfin/awesome-jellyfin/blob/main/CLIENTS.md</a><br>「Jellyfin Media Player」を入れておけば問題なさそうです。</li>
<li>Windows<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">winget install --id Jellyfin.JellyfinMediaPlayer</span><br></pre></td></tr></table></figure></li>
<li>Arch Linux<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">paru -S jellyfin-media-player</span><br></pre></td></tr></table></figure></li>
<li>Android<br><a target="_blank" rel="noopener" href="https://jellyfin.org/downloads/clients?platform=Android,Android%20TV">https://jellyfin.org/downloads/clients?platform=Android,Android%20TV</a></li>
</ul>
<h3 id="メディアファイルの配置"><a href="#メディアファイルの配置" class="headerlink" title="メディアファイルの配置"></a>メディアファイルの配置</h3><h4 id="メディアの管理方法"><a href="#メディアの管理方法" class="headerlink" title="メディアの管理方法"></a>メディアの管理方法</h4><ul>
<li>メディアフォルダ<br>&#x2F;media&#x2F;<br>このフォルダにメディア関連の情報を集約します。複数のディスク&#x2F;フォルダに存在しているメディアファイルに対するシンボリックリンクを配置します。<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">/media/</span><br><span class="line">  Movies/</span><br><span class="line">    「タイトル_(YYYY).xxx」動画ファイルのシンボリックリンク</span><br><span class="line">  Music/</span><br><span class="line">    アーティスト名/</span><br><span class="line">      アルバム名/</span><br><span class="line">        「タイトル.xxx」音楽ファイルのシンボリックリンク</span><br><span class="line">  Radios/</span><br><span class="line">    「ラジオステーション名.m3u」</span><br><span class="line">  Shows/</span><br><span class="line">    番組名/</span><br><span class="line">      Season_1/</span><br><span class="line">        「タイトル_S01E01.xxx」動画ファイルのシンボリックリンク</span><br></pre></td></tr></table></figure></li>
<li>動画ファイルの実体フォルダ（WindowsのFドライブ）<br>&#x2F;mnt&#x2F;f&#x2F;home&#x2F;chinachu&#x2F;<br>&#x2F;mnt&#x2F;f&#x2F;home&#x2F;epgstation&#x2F;<br>&#x2F;mnt&#x2F;f&#x2F;home&#x2F;epgstation.old&#x2F;</li>
<li>動画ファイルの実体フォルダ（WindowsのLドライブ）<br>&#x2F;mnt&#x2F;l&#x2F;home&#x2F;chinachu&#x2F;<br>&#x2F;mnt&#x2F;l&#x2F;home&#x2F;epgstation&#x2F;</li>
<li>音楽フォルダの実体フォルダ（WindowsのEドライブ）<br>&#x2F;mnt&#x2F;e&#x2F;home&#x2F;Music&#x2F;</li>
</ul>
<h4 id="メディアフォルダの作成"><a href="#メディアフォルダの作成" class="headerlink" title="メディアフォルダの作成"></a>メディアフォルダの作成</h4><ul>
<li>メディアの種類毎にフォルダを作成<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> /media/Movies /media/Music /media/Radios /media/Shows /media/links</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> -R 777 /media</span><br></pre></td></tr></table></figure>
<div class="note info flat"><p>&#x2F;media&#x2F;links は整理前のシンボリックリンクを仮配置するフォルダ</p>
</div></li>
</ul>
<h4 id="ライブラリの追加"><a href="#ライブラリの追加" class="headerlink" title="ライブラリの追加"></a>ライブラリの追加</h4><ul>
<li>Jellyfinのダッシュボードで各メディアに対するライブラリを追加<table>
<thead>
<tr>
<th align="left">フォルダ</th>
<th align="left">ライブラリの種類</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&#x2F;media&#x2F;Movies</td>
<td align="left">映画</td>
</tr>
<tr>
<td align="left">&#x2F;media&#x2F;Music</td>
<td align="left">音楽</td>
</tr>
<tr>
<td align="left">&#x2F;media&#x2F;Shows</td>
<td align="left">番組</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="シンボリックリンクの作成"><a href="#シンボリックリンクの作成" class="headerlink" title="シンボリックリンクの作成"></a>シンボリックリンクの作成</h4><ul>
<li>音楽<br><code>/media/Music/</code>配下にディレクトリとシンボリックリンクを配置するbashスクリプトをAIに作ってもらいます。<br>利用環境に合わせて「ファイルの ARTIST、ALBUM、TITLE タグを使って、ファイルをディレクトリ階層 “ARTIST&#x2F;ALBUM&#x2F;TITLE.拡張子” に移動する Bash スクリプトを作成」のような感じで指示すると素晴らしい精度でスクリプトを生成してくれます。</li>
<li>映画と番組<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /mnt/f/home/epgstation.old</span><br><span class="line">find * -<span class="built_in">type</span> f -<span class="built_in">print</span> | xargs -I&#123;&#125; <span class="built_in">ln</span> -s <span class="variable">$PWD</span>/&#123;&#125; /media/links/&#123;&#125;</span><br><span class="line"><span class="built_in">cd</span> /media/links</span><br></pre></td></tr></table></figure>
<ul>
<li>映画の場合<br>ファイル名を「タイトル_(YYYY).xxx」の形式に変更して以下を実行する。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mv</span> *ハリー・ポッター* /media/Movies/</span><br></pre></td></tr></table></figure></li>
<li>番組の場合<br>ファイル名を「タイトル_S01E01.xxx」の形式に変更して以下を実行する。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /media/Shows/世界の車窓から/Season_1</span><br><span class="line"><span class="built_in">mv</span> *世界の車窓から* /media/Shows/世界の車窓から/Season_1/</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="インターネットラジオの追加"><a href="#インターネットラジオの追加" class="headerlink" title="インターネットラジオの追加"></a>インターネットラジオの追加</h4><ol>
<li><p>m3uファイルの入手<br>  <a target="_blank" rel="noopener" href="https://directory.shoutcast.com/">https://directory.shoutcast.com/</a> にて対象のストリーミングのダウンロードアイコンを左クリックし、「Any Player (.m3u)」を右クリックして「名前を付けてリンク先を保存…」、<code>/media/Radios/</code>に格納</p>
</li>
<li><p>ストリームURLを補正<br>  m3uファイル内のURLの行末が<code>/stream</code>になるように修正</p>
</li>
<li><p>インターネットラジオの追加</p>
<ul>
<li><p>ダッシュボード &gt; ライブTV &gt; チューナーデバイス<kbd>+</kbd></p>
<table>
<tr><td style="background: #f5f6f8"><b>チューナータイプ<td>M3U Tuner
<tr><td style="background: #f5f6f8"><b>ファイル又はURL<td><tt>/media/Radios/ラジオステーション名.m3u
</table></li>
</ul>
</li>
<li><p>インターネットラジオの再生<br>  マイメディア &gt; ライブTV &gt; チャンネル からラジオステーションを選択<br>  再生までに10秒くらいかかる。</p>
</li>
</ol>
<h4 id="テレビ番組のリアルタイム視聴設定"><a href="#テレビ番組のリアルタイム視聴設定" class="headerlink" title="テレビ番組のリアルタイム視聴設定"></a>テレビ番組のリアルタイム視聴設定</h4><ol>
<li><p>MirakurunのIPTV設定確認</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://192.168.11.2:40772/">http://192.168.11.2:40772</a> を参照し、右上のConnection Guideを押下</p>
<table>
<tr><td style="background: #f5f6f8"><b>M3U Playlist<td><tt>http://192.168.11.2:40772/api/iptv/playlist
<tr><td style="background: #f5f6f8"><b>XMLTV<td><tt>http://192.168.11.2:40772/api/iptv/xmltv
<tr><td style="background: #f5f6f8"><b>HDHomeRun Device Address<td><tt>http://192.168.11.2:40772/api/iptv
</table></li>
</ul>
</li>
<li><p>チューナーデバイスの追加(1)</p>
<ul>
<li><p>ダッシュボード &gt; ライブTV &gt; チューナーデバイス<kbd>+</kbd></p>
<table>
<tr><td style="background: #f5f6f8"><b>チューナータイプ<td>M3U Tuner
<tr><td style="background: #f5f6f8"><b>URL<td><tt>http://192.168.11.2:40772/api/iptv/playlist
</table></li>
</ul>
</li>
<li><p>チューナーデバイスの追加(2)</p>
<ul>
<li>ダッシュボード &gt; ライブTV &gt; チューナーデバイス<kbd>+</kbd><table>
<tr><td style="background: #f5f6f8"><b>チューナータイプ<td>HDHomeRun
<tr><td style="background: #f5f6f8"><b>URL<td><tt>http://192.168.11.2:40772/api/iptv
</table></li>
</ul>
</li>
<li><p>TV番組情報のプロバイダの追加</p>
<ul>
<li><p>ダッシュボード &gt; ライブTV &gt; TV番組情報のプロバイダ<kbd>+</kbd><br> 「XMLTV」を選択</p>
<table>
<tr><td style="background: #f5f6f8"><b>ファイル又はURL<td><tt>http://192.168.11.2:40772/api/iptv/xmltv
</table></li>
</ul>
</li>
<li><p>「ガイドデータの更新」を押下</p>
</li>
<li><p>テレビ番組の再生<br>  ホーム画面やライブTVからチャンネルを選択</p>
</li>
</ol>
<h3 id="その他"><a href="#その他" class="headerlink" title="その他"></a>その他</h3><ul>
<li>プラグイン、テーマ等<br><a target="_blank" rel="noopener" href="https://github.com/awesome-jellyfin/awesome-jellyfin/">https://github.com/awesome-jellyfin/awesome-jellyfin/</a></li>
<li>Jellyfinのメディアライブラリの種類<br>「映画」、「音楽」、「番組」、「ブック」、「ホームビデオと写真」、「ミュージックビデオ」、「TV番組と映画を混ぜる」</li>
<li>Jellyfinはシンボリックリンクを認識する</li>
<li>複数の機器のクライアントで同時にメディアを再生するには：<br>別のアカウントを利用すべきかもしれない</li>
<li>インターネットから自宅サーバへOpenVPNで接続してメディアにアクセス可能</li>
<li>Android版Jellyfinアプリでは動画再生時に強制的にランドスケープモードになる。Androidを自動回転モードに設定している場合、画面を傾け直すことでポートレートモードでの再生が可能。<br><a target="_blank" rel="noopener" href="https://github.com/jellyfin/jellyfin-android/issues/1654">https://github.com/jellyfin/jellyfin-android/issues/1654</a></li>
<li>プレイリストへの追加が失敗する場合はダッシュボードからサーバを再起動</li>
<li>ホームのマイメディアカードの日本語ライブラリ名が文字化け：<br>カスタムCSSでフォントを指定できないか調査要だが以下の手順で暫定回避可能<ol>
<li>ライブラリ本体を英語名に変更</li>
<li>ライブラリのスキャンが完全に終了するまで待つ</li>
<li>プライヤー側メタデータを日本語名に変更<br>再度日本語名が有効になって文字化けしたので根本対策が必要</li>
</ol>
</li>
<li>インターネットラジオが視聴できなくなったので対策が必要<br>再生時にエラーログが出力されている</li>
</ul>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/mirakurun/">mirakurun</a><a class="post-meta__tags" href="/tags/jellyfin/">jellyfin</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/07/19/qwen3/" title="Qwen3"><img class="cover" src="https://camo.githubusercontent.com/8793b3b4014d538b367ec8819dcca85e79cb8d910c808fa7849e3cd85e2ebe79/68747470733a2f2f7169616e77656e2d7265732e6f73732d616363656c65726174652d6f766572736561732e616c6979756e63732e636f6d2f6c6f676f5f7177656e332e706e67" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Qwen3</div></div><div class="info-2"><div class="info-item-1"> Qwen3を使ってみました。Qwen3はAlibabaが開発したオープンソースの大規模言語モデル(LLM)の最新バージョンです。UIにはOpen WebUIを利用しました。 https://github.com/QwenLM/Qwen3https://github.com/open-webui/open-webui 2025-08-04https://ollama.com/downloadOllama GUIアプリ   環境 Window 11 python 3.11.9Requires-Python &lt;3.12.0a1,&gt;&#x3D;3.11  nvidia cuda 12.9 git 2.50.1 ollama 0.9.6 open-webui v0.6.18    構築前提ソフトウェアのインストール pythonwinget install --id Python.Python.3.11 -e nvidia cudawinget install --id Nvidia.CUDA -e gitwinget install --id Git.Git -e olla...</div></div></div></a><a class="pagination-related" href="/2025/07/01/GNOME-Remote-Desktop-jp109-keyboard/" title="GNOME Remote Desktop + jp109 keyboard"><img class="cover" src="/images/grd_keyboard.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">GNOME Remote Desktop + jp109 keyboard</div></div><div class="info-2"><div class="info-item-1"> Arch LinuxやUbuntuへリモートデスクトップ接続した際にパイプ文字「|」が入力できない事象があります。gnome-remote-desktopのプロジェクトページではIssueが登録されていました。キーボードが正しく認識されないようです。私の環境ではデスクトップPCが日本語キーボード、ノートPCが英語キーボードです。キーボードの設定はどちらでも構わないので当面英語キーボードの設定にしようと思います。xrdpに戻すべきなのだろうか。   問題事象  日本語キーボードを接続したOS(WindowsやLinux)からGNOME Remote Desktopでリモート接続可能なLinux(Arch LinuxやUbuntu)にRDP接続した際にキーボードが正しく認識されない。  パイプ文字が入力できない。半角&#x2F;全角キー押下でIMEが過度に切り替わる。 環境 サーバArch Linux (x86_64), gnome-remote-desktop 48.1, freerdp 3.16Ubuntu 25.04 (aarch64), gnome-remote-deskt...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2017/01/24/Docker-Mirakurun-Chinachu/" title="Docker Mirakurun Chinachu"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2017-01-24</div><div class="info-item-2">Docker Mirakurun Chinachu</div></div><div class="info-2"><div class="info-item-1">https://github.com/Chinachu/docker-mirakurun-chinachuUbuntu 16.10 の環境でDocker Mirakurun Chinachu を使ってみました。    Docker のインストール    $ sudo apt install curl$ curl -fsSL https://get.docker.com/ | sh   Docker Engine がインストールされない&#x2F;バージョンが古い場合は以下とすると良いかもしれない。  /etc/apt/sources.list.d/docker.listdeb [arch=amd64] https://apt.dockerproject.org/repo ubuntu-xenial maindeb [arch=amd64] https://apt.dockerproject.org/repo ubuntu-xenial testing2. Docker Compose のインストール  $ sudo curl -L &quot;https://github.com...</div></div></div></a><a class="pagination-related" href="/2020/07/12/EPGStation-on-WSL/" title="EPGStation&#x2F;Mirakurun on WSL"><img class="cover" src="/images/epgstation.drawio.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-12</div><div class="info-item-2">EPGStation&#x2F;Mirakurun on WSL</div></div><div class="info-2"><div class="info-item-1">https://github.com/l3tnun/EPGStationhttps://github.com/Chinachu/MirakurunChianchu の調子が悪くなったのでEPGStation に乗り換えてみました。EPGStation とMirakurun をWSL 上に構築しました。   環境 ソフトウェア構成  Windows 10 Insider Preview build 20161 WSL (Ubuntu 20.04 LTS) node v14.4.0 EPGStation 1.7.0 Mirakurun 3.2.0   npm 6.14.5 pm2 4.4.0 ffmpeg 4.2.2 python 2.7.18rc1 gcc 9.3.0   BonRecTest 1.0.0 Kodi 18.6 PVR IPTV Simple Client 3.9.8       ディレクトリ配置     if (!window.google) {     document.body.innerHTML = 'You need to include the scrip...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">ktkr3d</div><div class="author-info-description">Memorandum</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">489</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">199</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ktkr3d"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/ktkr3d" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://gist.github.com/ktkr3d" target="_blank" title="Gist"><i class="fas fa-code" style="color: #24292e;"></i></a><a class="social-icon" href="https://x.com/ktkr3d" target="_blank" title="X"><i class="fab fa-x-twitter" style="color: #24292e;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#2025-12-14"><span class="toc-number">1.</span> <span class="toc-text">2025-12-14</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2025-12-07"><span class="toc-number">2.</span> <span class="toc-text">2025-12-07</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2025-11-29"><span class="toc-number">3.</span> <span class="toc-text">2025-11-29</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2025-11-26"><span class="toc-number">4.</span> <span class="toc-text">2025-11-26</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2025-11-24"><span class="toc-number">5.</span> <span class="toc-text">2025-11-24</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2025-11-22"><span class="toc-number">6.</span> <span class="toc-text">2025-11-22</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%92%B0%E5%A2%83"><span class="toc-number">7.</span> <span class="toc-text">環境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A7%8B%E7%AF%89"><span class="toc-number">8.</span> <span class="toc-text">構築</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%B5%E3%83%BC%E3%83%90%EF%BC%88WSL-Ubuntu%EF%BC%89"><span class="toc-number">8.1.</span> <span class="toc-text">サーバ（WSL&#x2F;Ubuntu）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88"><span class="toc-number">8.2.</span> <span class="toc-text">クライアント</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%83%A1%E3%83%87%E3%82%A3%E3%82%A2%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E9%85%8D%E7%BD%AE"><span class="toc-number">9.</span> <span class="toc-text">メディアファイルの配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%A1%E3%83%87%E3%82%A3%E3%82%A2%E3%81%AE%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-number">9.1.</span> <span class="toc-text">メディアの管理方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%A1%E3%83%87%E3%82%A3%E3%82%A2%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%81%AE%E4%BD%9C%E6%88%90"><span class="toc-number">9.2.</span> <span class="toc-text">メディアフォルダの作成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AE%E8%BF%BD%E5%8A%A0"><span class="toc-number">9.3.</span> <span class="toc-text">ライブラリの追加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%B7%E3%83%B3%E3%83%9C%E3%83%AA%E3%83%83%E3%82%AF%E3%83%AA%E3%83%B3%E3%82%AF%E3%81%AE%E4%BD%9C%E6%88%90"><span class="toc-number">9.4.</span> <span class="toc-text">シンボリックリンクの作成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%8D%E3%83%83%E3%83%88%E3%83%A9%E3%82%B8%E3%82%AA%E3%81%AE%E8%BF%BD%E5%8A%A0"><span class="toc-number">9.5.</span> <span class="toc-text">インターネットラジオの追加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%86%E3%83%AC%E3%83%93%E7%95%AA%E7%B5%84%E3%81%AE%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0%E8%A6%96%E8%81%B4%E8%A8%AD%E5%AE%9A"><span class="toc-number">9.6.</span> <span class="toc-text">テレビ番組のリアルタイム視聴設定</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%81%9D%E3%81%AE%E4%BB%96"><span class="toc-number">10.</span> <span class="toc-text">その他</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/21/Prism-Launcher/" title="Prism Launcher">Prism Launcher</a><time datetime="2025-12-21T12:31:02.000Z" title="Created 2025-12-21 21:31:02">2025-12-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/21/Systemd-user-timer/" title="Systemd user timer">Systemd user timer</a><time datetime="2025-12-20T18:59:19.000Z" title="Created 2025-12-21 03:59:19">2025-12-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/06/Faugus-Launcher/" title="Faugus Launcher">Faugus Launcher</a><time datetime="2025-12-06T06:14:20.000Z" title="Created 2025-12-06 15:14:20">2025-12-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/01/SDDM/" title="SDDM">SDDM</a><time datetime="2025-12-01T08:35:57.000Z" title="Created 2025-12-01 17:35:57">2025-12-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/30/Walker/" title="Walker">Walker</a><time datetime="2025-11-30T13:18:02.000Z" title="Created 2025-11-30 22:18:02">2025-11-30</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/travel.png);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2010 - 2025 By ktkr3d</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null
  const getUtterancesTheme = theme => theme === 'dark' ? 'photon-dark' : 'github-light'

  const loadUtterances = (el = document, key) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyUtterances = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const config = {
      src: 'https://utteranc.es/client.js',
      repo: 'ktkr3d/ktkr3d.github.io',
      theme: getUtterancesTheme(document.documentElement.getAttribute('data-theme')),
      crossorigin: 'anonymous',
      async: true,
      ...option,
      'issue-term': isShuoshuo ? key : (option && option['issue-term']) || 'pathname'
    }

    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => ele.setAttribute(key, value))
    el.querySelector('#utterances-wrap').appendChild(ele)
  }

  const changeUtterancesTheme = theme => {
    const iframe = document.querySelector('#utterances-wrap iframe')
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: getUtterancesTheme(theme)
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es')
    }
  }

  btf.addGlobalFn('themeChange', changeUtterancesTheme, 'utterances')

  if (isShuoshuo) {
    'Utterances' === 'Utterances'
      ? window.shuoshuoComment = { loadComment: loadUtterances }
      : window.loadOtherComment = loadUtterances
    return
  }
  
  if ('Utterances' === 'Utterances' || !false) {
    if (false) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
    else loadUtterances()
  } else {
    window.loadOtherComment = loadUtterances
  }
})()</script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="local-search-input"><input placeholder="Search for Posts" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>