<!DOCTYPE html><html lang="jp" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>oUF MyLayout Addon | Memorandum!</title><meta name="author" content="ktkr3d"><meta name="copyright" content="ktkr3d"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="AIを使ってoUFフレームワークを利用したWorld of Warcraftのユニットフレームアドオンを作ってみました。Visual Studio Code にGemini Code Assist拡張を組み込みました。実装を確かめながら機能を追加できます。Geminiは混雑時にレスポンスが悪くなる傾向がありますが、無料であるにも関わらずコンパクトで間違いの無いコードを生成するような気がします。追加">
<meta property="og:type" content="article">
<meta property="og:title" content="oUF MyLayout Addon">
<meta property="og:url" content="https://ktkr3d.github.io/2025/12/29/oUF-MyLayout-Addon/index.html">
<meta property="og:site_name" content="Memorandum!">
<meta property="og:description" content="AIを使ってoUFフレームワークを利用したWorld of Warcraftのユニットフレームアドオンを作ってみました。Visual Studio Code にGemini Code Assist拡張を組み込みました。実装を確かめながら機能を追加できます。Geminiは混雑時にレスポンスが悪くなる傾向がありますが、無料であるにも関わらずコンパクトで間違いの無いコードを生成するような気がします。追加">
<meta property="og:locale">
<meta property="og:image" content="https://google.gallerycdn.vsassets.io/extensions/google/geminicodeassist/2.64.0/1765999594207/Microsoft.VisualStudio.Services.Icons.Default">
<meta property="article:published_time" content="2025-12-29T12:51:56.000Z">
<meta property="article:modified_time" content="2025-12-30T05:54:04.946Z">
<meta property="article:author" content="ktkr3d">
<meta property="article:tag" content="gemini">
<meta property="article:tag" content="ouf">
<meta property="article:tag" content="wow">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://google.gallerycdn.vsassets.io/extensions/google/geminicodeassist/2.64.0/1765999594207/Microsoft.VisualStudio.Services.Icons.Default"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "oUF MyLayout Addon",
  "url": "https://ktkr3d.github.io/2025/12/29/oUF-MyLayout-Addon/",
  "image": "https://google.gallerycdn.vsassets.io/extensions/google/geminicodeassist/2.64.0/1765999594207/Microsoft.VisualStudio.Services.Icons.Default",
  "datePublished": "2025-12-29T12:51:56.000Z",
  "dateModified": "2025-12-30T05:54:04.946Z",
  "author": [
    {
      "@type": "Person",
      "name": "ktkr3d",
      "url": "https://ktkr3d.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://ktkr3d.github.io/2025/12/29/oUF-MyLayout-Addon/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-MG6LWTJBY0"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-MG6LWTJBY0')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-MG6LWTJBY0', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":false,"highlightLang":false,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'medium_zoom',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'oUF MyLayout Addon',
  isHighlightShrink: undefined,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><script type="text/javascript" src="//www.google.com/jsapi"></script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/rss.xml" title="Memorandum!" type="application/rss+xml">
</head><body><div class="bg-animation" id="web_bg" style="background-color: rgb(227, 233, 199);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">490</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">201</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Memorandum!</span></a><a class="nav-page-title" href="/"><span class="site-name">oUF MyLayout Addon</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">oUF MyLayout Addon</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-12-29T12:51:56.000Z" title="Created 2025-12-29 21:51:56">2025-12-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-12-30T05:54:04.946Z" title="Updated 2025-12-30 14:54:04">2025-12-30</time></span></div><div class="meta-secondline"></div></div></div><article class="container post-content" id="article-container"><p>AIを使ってoUFフレームワークを利用したWorld of Warcraftのユニットフレームアドオンを作ってみました。<br>Visual Studio Code にGemini Code Assist拡張を組み込みました。実装を確かめながら機能を追加できます。Geminiは混雑時にレスポンスが悪くなる傾向がありますが、無料であるにも関わらずコンパクトで間違いの無いコードを生成するような気がします。追加機能を提案してくれるので了承するだけで機能が追加されていきます。<br>ある程度進んだら設定値とコードの分離、処理の最適化を図りたいと思います。</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=Google.geminicodeassist">https://marketplace.visualstudio.com/items?itemName=Google.geminicodeassist</a><br><a target="_blank" rel="noopener" href="https://github.com/oUF-wow/oUF">https://github.com/oUF-wow/oUF</a></p>
<ul>
<li><p>Player、Pet、Target ユニットフレーム<br>  <img src="/images/wow_ouf_mylayout.jpg"></p>
</li>
<li><p>Party ユニットフレーム<br>  <img src="/images/wow_ouf_mylayout_party.jpg"></p>
</li>
</ul>
<span id="more"></span>

<h3 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h3><h4 id="開発環境"><a href="#開発環境" class="headerlink" title="開発環境"></a>開発環境</h4><ul>
<li>Visual Studio Code<ul>
<li>Gemini Code Assist拡張</li>
</ul>
</li>
</ul>
<h4 id="フォルダ構成"><a href="#フォルダ構成" class="headerlink" title="フォルダ構成"></a>フォルダ構成</h4><ul>
<li>ソースコード  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">oUF_MyLayout/</span><br><span class="line">├── libs/</span><br><span class="line">│   └── oUF/</span><br><span class="line">│        └── oUF.xml</span><br><span class="line">├── media/</span><br><span class="line">│   ├ ── fonts/</span><br><span class="line">│   │   └── Prototype.ttf</span><br><span class="line">│   └── textures/</span><br><span class="line">│        ├── Gradient.tga</span><br><span class="line">│        └── Minimalist.tga</span><br><span class="line">├── oUF_MyLayout.toc</span><br><span class="line">└── oUF_MyLayout.lua</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="構築"><a href="#構築" class="headerlink" title="構築"></a>構築</h3><h4 id="oUFの取得"><a href="#oUFの取得" class="headerlink" title="oUFの取得"></a>oUFの取得</h4><ul>
<li>git clone  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> oUF_MyLayout/libs/</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/oUF-wow/oUF.git</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="ソースコード"><a href="#ソースコード" class="headerlink" title="ソースコード"></a>ソースコード</h4><ul>
<li>TOC  <figure class="highlight text"><figcaption><span>oUF_MyLayout/oUF_MyLayout.toc</span></figcaption><table><tr><td class="code"><pre><span class="line">## Interface: 110207</span><br><span class="line">## Title: oUF MyLayout</span><br><span class="line">## Author: YourName</span><br><span class="line">## Version: 1.0</span><br><span class="line"></span><br><span class="line">libs\oUF\oUF.xml</span><br><span class="line">oUF_MyLayout.lua</span><br></pre></td></tr></table></figure></li>
<li>メイン処理（途中版）  <figure class="highlight lua"><figcaption><span>oUF_MyLayout/oUF_MyLayout.lua</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> addonName, ns = ...</span><br><span class="line"><span class="comment">-- oUFオブジェクトを取得（グローバルまたはネームスペースから）</span></span><br><span class="line"><span class="keyword">local</span> oUF = ns.oUF <span class="keyword">or</span> oUF</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- スタイル定義関数 (Shared Style Function)</span></span><br><span class="line"><span class="comment">-- ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- この関数内で、各ユニットフレーム（プレイヤー、ターゲット等）の見た目を定義します。</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">Shared</span><span class="params">(self, unit)</span></span></span><br><span class="line">    <span class="comment">-- 1. フレームの基本設定</span></span><br><span class="line">    <span class="built_in">self</span>:RegisterForClicks(<span class="string">&quot;AnyUp&quot;</span>)</span><br><span class="line">    <span class="built_in">self</span>:SetScript(<span class="string">&quot;OnEnter&quot;</span>, UnitFrame_OnEnter)</span><br><span class="line">    <span class="built_in">self</span>:SetScript(<span class="string">&quot;OnLeave&quot;</span>, UnitFrame_OnLeave)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">-- フレームのサイズ設定 (幅230px, 高さ50px)</span></span><br><span class="line">    <span class="keyword">if</span> unit == <span class="string">&quot;pet&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">self</span>:SetSize(<span class="number">134</span>, <span class="number">47</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">self</span>:SetSize(<span class="number">254</span>, <span class="number">47</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 背景の設定 (オプション)</span></span><br><span class="line">    <span class="keyword">local</span> bg = <span class="built_in">self</span>:CreateTexture(<span class="literal">nil</span>, <span class="string">&quot;BACKGROUND&quot;</span>)</span><br><span class="line">    bg:SetAllPoints()</span><br><span class="line">    bg:SetColorTexture(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>) <span class="comment">-- 半透明の黒</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- --------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">-- 2. Health Bar (HPバー) の作成</span></span><br><span class="line">    <span class="comment">-- --------------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">local</span> Health = CreateFrame(<span class="string">&quot;StatusBar&quot;</span>, <span class="literal">nil</span>, <span class="built_in">self</span>)</span><br><span class="line">    Health:SetPoint(<span class="string">&quot;TOPLEFT&quot;</span>, <span class="built_in">self</span>, <span class="string">&quot;TOPLEFT&quot;</span>, <span class="number">2</span>, <span class="number">-2</span>)</span><br><span class="line">    Health:SetPoint(<span class="string">&quot;TOPRIGHT&quot;</span>, <span class="built_in">self</span>, <span class="string">&quot;TOPRIGHT&quot;</span>, <span class="number">-2</span>, <span class="number">-2</span>)</span><br><span class="line">    Health:SetHeight(<span class="number">30</span>) <span class="comment">-- HPバーの高さ</span></span><br><span class="line">    <span class="comment">-- Health:SetStatusBarTexture(&quot;Interface\\BUTTONS\\WHITE8X8&quot;) -- シンプルなテクスチャ</span></span><br><span class="line">    Health:SetStatusBarTexture(<span class="string">&quot;Interface\\Addons\\oUF_MyLayout\\media\\textures\\Gradient.tga&quot;</span>)</span><br><span class="line">    Health:SetStatusBarColor(<span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">0.25</span>) <span class="comment">-- #404040</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- HPバーの背景</span></span><br><span class="line">    <span class="keyword">local</span> HealthBg = Health:CreateTexture(<span class="literal">nil</span>, <span class="string">&quot;BACKGROUND&quot;</span>)</span><br><span class="line">    HealthBg:SetAllPoints(<span class="literal">true</span>)</span><br><span class="line">    HealthBg:SetColorTexture(<span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">0.2</span>)</span><br><span class="line">    HealthBg.multiplier = <span class="number">0.2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- オプション: クラスカラーや敵対反応カラーを有効化</span></span><br><span class="line">    Health.colorTapping = <span class="literal">true</span></span><br><span class="line">    Health.colorDisconnected = <span class="literal">true</span></span><br><span class="line">    Health.colorClass = <span class="literal">false</span></span><br><span class="line">    Health.colorReaction = <span class="literal">false</span></span><br><span class="line">    Health.bg = HealthBg</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- oUFに登録 (self.Healthに代入することでoUFが自動更新を行う)</span></span><br><span class="line">    <span class="built_in">self</span>.Health = Health</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- --------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">-- 3. Power Bar (マナ/リソースバー) の作成</span></span><br><span class="line">    <span class="comment">-- --------------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">local</span> Power = CreateFrame(<span class="string">&quot;StatusBar&quot;</span>, <span class="literal">nil</span>, <span class="built_in">self</span>)</span><br><span class="line">    Power:SetPoint(<span class="string">&quot;TOPLEFT&quot;</span>, Health, <span class="string">&quot;BOTTOMLEFT&quot;</span>, <span class="number">0</span>, <span class="number">-2</span>)</span><br><span class="line">    Power:SetPoint(<span class="string">&quot;TOPRIGHT&quot;</span>, Health, <span class="string">&quot;BOTTOMRIGHT&quot;</span>, <span class="number">0</span>, <span class="number">-2</span>)</span><br><span class="line">    Power:SetPoint(<span class="string">&quot;BOTTOM&quot;</span>, <span class="built_in">self</span>, <span class="string">&quot;BOTTOM&quot;</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">    Power:SetStatusBarTexture(<span class="string">&quot;Interface\\Addons\\oUF_MyLayout\\media\\textures\\Minimalist.tga&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> PowerBg = Power:CreateTexture(<span class="literal">nil</span>, <span class="string">&quot;BACKGROUND&quot;</span>)</span><br><span class="line">    PowerBg:SetAllPoints(<span class="literal">true</span>)</span><br><span class="line">    PowerBg:SetColorTexture(<span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">0.2</span>)</span><br><span class="line">    PowerBg.multiplier = <span class="number">0.2</span></span><br><span class="line"></span><br><span class="line">    Power.colorClass = <span class="literal">true</span> <span class="comment">-- クラスカラー</span></span><br><span class="line">    Power.bg = PowerBg</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- oUFに登録</span></span><br><span class="line">    <span class="built_in">self</span>.Power = Power</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- --------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">-- 4. テキスト情報 (名前とHP値)</span></span><br><span class="line">    <span class="comment">-- --------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">-- 名前</span></span><br><span class="line">    <span class="keyword">local</span> Name = Health:CreateFontString(<span class="literal">nil</span>, <span class="string">&quot;OVERLAY&quot;</span>)</span><br><span class="line">    Name:SetFont(<span class="string">&quot;Interface\\Addons\\oUF_MyLayout\\media\\fonts\\Prototype.ttf&quot;</span>, <span class="number">20</span>, <span class="string">&quot;OUTLINE&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> unit == <span class="string">&quot;pet&quot;</span> <span class="keyword">then</span></span><br><span class="line">        Name:SetPoint(<span class="string">&quot;BOTTOM&quot;</span>, Health, <span class="string">&quot;BOTTOM&quot;</span>, <span class="number">0</span>, <span class="number">-25</span>)</span><br><span class="line">        Name:SetTextColor(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>) <span class="comment">-- 白色</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        Name:SetPoint(<span class="string">&quot;TOPLEFT&quot;</span>, <span class="built_in">self</span>, <span class="string">&quot;BOTTOMLEFT&quot;</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">self</span>:Tag(Name, <span class="string">&quot;[name]&quot;</span>) <span class="comment">-- oUFのタグシステムを使用</span></span><br><span class="line">    <span class="built_in">self</span>.Name = Name</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- HP数値</span></span><br><span class="line">    <span class="keyword">if</span> unit ~= <span class="string">&quot;pet&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> HpVal = Health:CreateFontString(<span class="literal">nil</span>, <span class="string">&quot;OVERLAY&quot;</span>)</span><br><span class="line">        HpVal:SetFont(<span class="string">&quot;Interface\\Addons\\oUF_MyLayout\\media\\fonts\\Prototype.ttf&quot;</span>, <span class="number">24</span>, <span class="string">&quot;OUTLINE&quot;</span>)</span><br><span class="line">        HpVal:SetPoint(<span class="string">&quot;RIGHT&quot;</span>, Health, <span class="string">&quot;RIGHT&quot;</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">self</span>:Tag(HpVal, <span class="string">&quot;[perhp]%&quot;</span>) <span class="comment">-- パーセント表示</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- --------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">-- 5. Portrait (3Dモデル)</span></span><br><span class="line">    <span class="comment">-- --------------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">if</span> unit ~= <span class="string">&quot;pet&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> Portrait = CreateFrame(<span class="string">&quot;PlayerModel&quot;</span>, <span class="literal">nil</span>, <span class="built_in">self</span>)</span><br><span class="line">        Portrait:SetSize(<span class="number">150</span>, <span class="number">43</span>)</span><br><span class="line">        Portrait:SetPoint(<span class="string">&quot;LEFT&quot;</span>, <span class="built_in">self</span>, <span class="string">&quot;LEFT&quot;</span>, <span class="number">0</span>, <span class="number">0</span>) <span class="comment">-- フレームの右側に配置</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">-- 背景 (オプション)</span></span><br><span class="line">        <span class="keyword">local</span> PortraitBg = <span class="built_in">self</span>:CreateTexture(<span class="literal">nil</span>, <span class="string">&quot;BACKGROUND&quot;</span>)</span><br><span class="line">        PortraitBg:SetAllPoints(Portrait)</span><br><span class="line">        PortraitBg:SetColorTexture(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">self</span>.Portrait = Portrait</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- ファクトリー (Factory)</span></span><br><span class="line"><span class="comment">-- ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- スタイルを登録し、実際にフレームを生成(Spawn)します。</span></span><br><span class="line"></span><br><span class="line">oUF:RegisterStyle(<span class="string">&quot;MyLayout&quot;</span>, Shared)</span><br><span class="line"></span><br><span class="line">oUF:Factory(<span class="function"><span class="keyword">function</span><span class="params">(self)</span></span></span><br><span class="line">    <span class="built_in">self</span>:SetActiveStyle(<span class="string">&quot;MyLayout&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- プレイヤーフレームの生成と配置</span></span><br><span class="line">    <span class="keyword">local</span> player = <span class="built_in">self</span>:Spawn(<span class="string">&quot;player&quot;</span>)</span><br><span class="line">    player:SetPoint(<span class="string">&quot;CENTER&quot;</span>, <span class="number">-200</span>, <span class="number">-300</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- ターゲットフレームの生成と配置</span></span><br><span class="line">    <span class="keyword">local</span> target = <span class="built_in">self</span>:Spawn(<span class="string">&quot;target&quot;</span>)</span><br><span class="line">    target:SetPoint(<span class="string">&quot;CENTER&quot;</span>, <span class="number">200</span>, <span class="number">-300</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">-- ペットフレームの生成と配置</span></span><br><span class="line">    <span class="keyword">local</span> pet = <span class="built_in">self</span>:Spawn(<span class="string">&quot;pet&quot;</span>)</span><br><span class="line">    pet:SetPoint(<span class="string">&quot;CENTER&quot;</span>, <span class="number">0</span>, <span class="number">-300</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- フォーカスフレームなども同様に追加可能</span></span><br><span class="line">    <span class="comment">-- self:Spawn(&quot;focus&quot;):SetPoint(&quot;CENTER&quot;, 0, -100)</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="設置"><a href="#設置" class="headerlink" title="設置"></a>設置</h3><ul>
<li>アドオンフォルダにコピー  <figure class="highlight ps1"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Copy-Item</span> <span class="literal">-Path</span> <span class="string">&quot;C:\repos\oUF_MyLayout&quot;</span> <span class="literal">-Destination</span> <span class="string">&quot;C:\Program Files (x86)\World of Warcraft\_retail_\Interface\AddOns\&quot;</span> <span class="literal">-Recurse</span> <span class="literal">-Force</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h3><h4 id="機能追加"><a href="#機能追加" class="headerlink" title="機能追加"></a>機能追加</h4><ul>
<li>ユニットフレームの追加<ul>
<li>済<br>  player, target, pet, party, raid, maintank, boss</li>
<li>未<br>  target-target, pet-target,<br>  party-target, party-pet,<br>  maintank-target, maintank-target-target, boss-target,<br>  arena, arena-target</li>
</ul>
</li>
<li>設定項目の追加<ul>
<li>済<br>  キャストバー(player)<br>  Indicator(Rest, Combat)<br>  Marker(Raid, Role, ReadyCheck)</li>
<li>未<br>  キャストバー(target, party)<br>  ステータステキスト(AFK, Dead, DC)<br>  Target Debuff(by Player Only)</li>
</ul>
</li>
<li>戦闘時に3Dポートレイトのアニメーションを停止</li>
<li>設定画面（ユニットフレームの種類と設定項目の組み合わせ）</li>
<li>プロファイル</li>
</ul>
<h4 id="調整"><a href="#調整" class="headerlink" title="調整"></a>調整</h4><ul>
<li>クラスカラーが微妙に明るいような気がする。</li>
<li>クラスカラーが黒い。(Warrior, DemonHunter, Druid:Normal&#x2F;Moonkin)</li>
<li>標準リソース（テクスチャ、フォント）に差し替え</li>
</ul>
<h4 id="リファクタリング"><a href="#リファクタリング" class="headerlink" title="リファクタリング"></a>リファクタリング</h4><ul>
<li>デフォルト値を別ファイル化</li>
<li>設定値のデータベース化、再利用</li>
<li>類似処理の最適化</li>
<li>コメントの英語化(AIで)</li>
<li>ガイド適用、パッケージング<br>  <a target="_blank" rel="noopener" href="https://github.com/oUF-wow/oUF/wiki/Embedding">https://github.com/oUF-wow/oUF/wiki/Embedding</a><br>  <a target="_blank" rel="noopener" href="https://www.curseforge.com/docs/packaging">https://www.curseforge.com/docs/packaging</a></li>
<li>アドオン名の変更</li>
<li>Githubリポジトリ登録</li>
</ul>
<h4 id="その他"><a href="#その他" class="headerlink" title="その他"></a>その他</h4><ul>
<li>LUIのユニットフレーム以外の機能の代替手段の検討<ul>
<li>Minimap: <a target="_blank" rel="noopener" href="https://www.curseforge.com/wow/addons/leatrix-plus">Leatrix Plus</a></li>
<li>Infotext: <a target="_blank" rel="noopener" href="https://www.curseforge.com/wow/addons/broker-everything">Broker Everything</a></li>
<li>Raid tools: Blizzard UI</li>
</ul>
</li>
</ul>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/wow/">wow</a><a class="post-meta__tags" href="/tags/ouf/">ouf</a><a class="post-meta__tags" href="/tags/gemini/">gemini</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/12/21/Prism-Launcher/" title="Prism Launcher"><img class="cover" src="https://upload.wikimedia.org/wikipedia/commons/7/74/Prism_Launcher_logo.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Prism Launcher</div></div><div class="info-2"><div class="info-item-1"> Prism Launcherを使ってMinecraftをセットアップしました。過去にWindowsで遊んでいたワールドデータをCachyOS上で取り込めました。                                     Prism Launcher             An open source Minecraft launcher with the ability to manage multiple instances, accounts and mods. Focused on user freedom and free redistributability.    環境 CachyOS Hyprland Prism Launcher 9.4 Minecraft 1.21.8      構築Prism Launcher Prism Launcher  sudo pacman -S prismlauncher Minecraft  1.21.8  使いたいModsが対応している最新版を選択します。 Mods ローダ  Fabric  日本語フォント 日本...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/08/10/Trinket-Button-Custom/" title="Trinket Button Custom"><img class="cover" src="/images/trinket_button_custom.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-10</div><div class="info-item-2">Trinket Button Custom</div></div><div class="info-2"><div class="info-item-1"> World of WarcraftのTrinket Button拡張機能をカスタマイズしてみました。https://wago.io/Nn9Hg5PH7 Trinket Buttonは装備しているトリンケットが利用（Use）可能な場合にクリック可能なボタンとして表示します。World of Warcraftではトリンケットの他に利用可能な装備としてメインハンドがあります。Trinket Buttonを改造してメインハンドにも対応させてみました。 2024&#x2F;08&#x2F;14 更新：WoW 11.0.2 対応 deprecatedなAPIを修正https://warcraft.wiki.gg/wiki/Patch_11.0.2/API_changes#Deprecated_API 仕様が変更されたAPIを修正https://warcraft.wiki.gg/wiki/API_C_Spell.GetSpellCooldown    環境 World of Warcraft 11.0.0 (56008) &#x2F; 11.0.2 (56110) WeakAuras 5.1...</div></div></div></a><a class="pagination-related" href="/2020/07/10/SheetUI/" title="SheetUI"><img class="cover" src="/images/sheetui.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-10</div><div class="info-item-2">SheetUI</div></div><div class="info-2"><div class="info-item-1">https://sheetui.com/SheetUI でGoogle スプレッドシートのデータをWeb ページで可視化してみました。ARMORY ボタンでBlizzard の各キャラクタのページに遷移します。GUIDE ボタンで各キャラクタのクラス&#x2F;スペックに応じたWowHead ガイドに遷移します。   Google スプレッドシートの準備 Chrome のツールバーの「アプリ」を選択 「スプレッドシート」を開く 新しいスプレッドシートを作成「空白」を選択 データの登録        if (!window.google) {     document.body.innerHTML = 'You need to include the script //google.com/jsapi on your template';     throw 'Google JS API is needed';   } else {     (function() {       google.load('visualization', '1.0', {'packages': ["...</div></div></div></a><a class="pagination-related" href="/2019/07/31/WoW-Armory-to-PDF/" title="WoW Armory to PDF"><div class="cover" style="background: /images/404.pdf"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-07-31</div><div class="info-item-2">WoW Armory to PDF</div></div><div class="info-2"><div class="info-item-1">  	      	    Puppeteer を使ってWoW Armory の情報をPDF 形式で保存してみました。実行した日付、レルム、キャラクター名をファイル名にしてPDF 化します。履歴をとるのに便利ですね。 上記はキャラクターが見つからなかった場合のPDF の例です。“Something’s Not Quite Right”ゲーム内で聞いたことがあるセリフですね。   準備$ npm i puppeteer date-utils  コードwowarmory.jsconst puppeteer = require(&#x27;puppeteer&#x27;);require(&#x27;date-utils&#x27;);const chars = [  [&#x27;en-us&#x27;, &#x27;us&#x27;, &#x27;barthilas&#x27;, &#x27;name01&#x27;],  [&#x27;en-us&#x27;, &#x27;us&#x27;, &#x27;barthilas&#x27;, &#x27;name02&#x27;], ...</div></div></div></a><a class="pagination-related" href="/2022/11/25/WoW-Addon-LoggingChat/" title="WoW Addon - LoggingChat"><img class="cover" src="/images/wow_loggingchat.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-25</div><div class="info-item-2">WoW Addon - LoggingChat</div></div><div class="info-2"><div class="info-item-1">https://github.com/ktkr3d/LoggingChat World of Warcraft でチャット表示内容をファイルにロギングするアドオンを作ってみました。処理はログイン時にチャットの保存設定を有効にしているだけです。   環境構築 リポジトリをZIPでダウンロードします。https://github.com/ktkr3d/LoggingChathttps://github.com/ktkr3d/LoggingChat/archive/refs/heads/main.zip  以下の階層になるように配置します。   _retail_    └─Interface        └─AddOns            └─LoggingChat                    LoggingChat.lua                    LoggingChat.toc  ゲーム内でアドオンを有効にします。 以下のファイルにログが追記されます。  _retail_    └─Logs            WoWChatLog.txt ログイン時...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">ktkr3d</div><div class="author-info-description">Memorandum</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">490</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">201</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ktkr3d"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/ktkr3d" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://gist.github.com/ktkr3d" target="_blank" title="Gist"><i class="fas fa-code" style="color: #24292e;"></i></a><a class="social-icon" href="https://x.com/ktkr3d" target="_blank" title="X"><i class="fab fa-x-twitter" style="color: #24292e;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%92%B0%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">環境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83"><span class="toc-number">1.1.</span> <span class="toc-text">開発環境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E6%A7%8B%E6%88%90"><span class="toc-number">1.2.</span> <span class="toc-text">フォルダ構成</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A7%8B%E7%AF%89"><span class="toc-number">2.</span> <span class="toc-text">構築</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#oUF%E3%81%AE%E5%8F%96%E5%BE%97"><span class="toc-number">2.1.</span> <span class="toc-text">oUFの取得</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89"><span class="toc-number">2.2.</span> <span class="toc-text">ソースコード</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A8%AD%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">設置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TODO"><span class="toc-number">4.</span> <span class="toc-text">TODO</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A9%9F%E8%83%BD%E8%BF%BD%E5%8A%A0"><span class="toc-number">4.1.</span> <span class="toc-text">機能追加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AA%BF%E6%95%B4"><span class="toc-number">4.2.</span> <span class="toc-text">調整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0"><span class="toc-number">4.3.</span> <span class="toc-text">リファクタリング</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%81%9D%E3%81%AE%E4%BB%96"><span class="toc-number">4.4.</span> <span class="toc-text">その他</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/29/oUF-MyLayout-Addon/" title="oUF MyLayout Addon">oUF MyLayout Addon</a><time datetime="2025-12-29T12:51:56.000Z" title="Created 2025-12-29 21:51:56">2025-12-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/21/Prism-Launcher/" title="Prism Launcher">Prism Launcher</a><time datetime="2025-12-21T12:31:02.000Z" title="Created 2025-12-21 21:31:02">2025-12-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/21/Systemd-user-timer/" title="Systemd user timer">Systemd user timer</a><time datetime="2025-12-20T18:59:19.000Z" title="Created 2025-12-21 03:59:19">2025-12-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/06/Faugus-Launcher/" title="Faugus Launcher">Faugus Launcher</a><time datetime="2025-12-06T06:14:20.000Z" title="Created 2025-12-06 15:14:20">2025-12-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/01/SDDM/" title="SDDM">SDDM</a><time datetime="2025-12-01T08:35:57.000Z" title="Created 2025-12-01 17:35:57">2025-12-01</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/travel.png);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2010 - 2025 By ktkr3d</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null
  const getUtterancesTheme = theme => theme === 'dark' ? 'photon-dark' : 'github-light'

  const loadUtterances = (el = document, key) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyUtterances = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const config = {
      src: 'https://utteranc.es/client.js',
      repo: 'ktkr3d/ktkr3d.github.io',
      theme: getUtterancesTheme(document.documentElement.getAttribute('data-theme')),
      crossorigin: 'anonymous',
      async: true,
      ...option,
      'issue-term': isShuoshuo ? key : (option && option['issue-term']) || 'pathname'
    }

    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => ele.setAttribute(key, value))
    el.querySelector('#utterances-wrap').appendChild(ele)
  }

  const changeUtterancesTheme = theme => {
    const iframe = document.querySelector('#utterances-wrap iframe')
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: getUtterancesTheme(theme)
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es')
    }
  }

  btf.addGlobalFn('themeChange', changeUtterancesTheme, 'utterances')

  if (isShuoshuo) {
    'Utterances' === 'Utterances'
      ? window.shuoshuoComment = { loadComment: loadUtterances }
      : window.loadOtherComment = loadUtterances
    return
  }
  
  if ('Utterances' === 'Utterances' || !false) {
    if (false) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
    else loadUtterances()
  } else {
    window.loadOtherComment = loadUtterances
  }
})()</script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="local-search-input"><input placeholder="Search for Posts" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>