<!DOCTYPE html><html lang="jp" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>WSL - Ubuntu 20.04 LTS | Memorandum!</title><meta name="author" content="ktkr3d"><meta name="copyright" content="ktkr3d"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="WSL のUbuntu 20.04 LTS が公開されていたのでUbuntu 18.04 LTS から移行しました。 マイクロソフトストアには以下の3つのUbuntu が存在しています。「Ubuntu」からはdo-release-upgradeでバージョンアップできるけれど、「Ubuntu 18.04 LTS」からはバージョンアップできないんですね。  Ubuntu Ubuntu-18.04 Ub">
<meta property="og:type" content="article">
<meta property="og:title" content="WSL - Ubuntu 20.04 LTS">
<meta property="og:url" content="https://ktkr3d.github.io/2020/06/19/WSL-Ubuntu-20-04-LTS/index.html">
<meta property="og:site_name" content="Memorandum!">
<meta property="og:description" content="WSL のUbuntu 20.04 LTS が公開されていたのでUbuntu 18.04 LTS から移行しました。 マイクロソフトストアには以下の3つのUbuntu が存在しています。「Ubuntu」からはdo-release-upgradeでバージョンアップできるけれど、「Ubuntu 18.04 LTS」からはバージョンアップできないんですね。  Ubuntu Ubuntu-18.04 Ub">
<meta property="og:locale">
<meta property="og:image" content="https://assets.ubuntu.com/v1/29985a98-ubuntu-logo32.png">
<meta property="article:published_time" content="2020-06-19T09:39:10.000Z">
<meta property="article:modified_time" content="2020-06-19T09:39:10.000Z">
<meta property="article:author" content="ktkr3d">
<meta property="article:tag" content="ubuntu">
<meta property="article:tag" content="wsl">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://assets.ubuntu.com/v1/29985a98-ubuntu-logo32.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "WSL - Ubuntu 20.04 LTS",
  "url": "https://ktkr3d.github.io/2020/06/19/WSL-Ubuntu-20-04-LTS/",
  "image": "https://assets.ubuntu.com/v1/29985a98-ubuntu-logo32.png",
  "datePublished": "2020-06-19T09:39:10.000Z",
  "dateModified": "2020-06-19T09:39:10.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "ktkr3d",
      "url": "https://ktkr3d.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://ktkr3d.github.io/2020/06/19/WSL-Ubuntu-20-04-LTS/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-MG6LWTJBY0"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-MG6LWTJBY0')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-MG6LWTJBY0', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":false,"highlightLang":false,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'medium_zoom',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'WSL - Ubuntu 20.04 LTS',
  isHighlightShrink: undefined,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><script type="text/javascript" src="//www.google.com/jsapi"></script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/rss.xml" title="Memorandum!" type="application/rss+xml">
</head><body><div class="bg-animation" id="web_bg" style="background-color: rgb(227, 233, 199);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">487</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">197</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Memorandum!</span></a><a class="nav-page-title" href="/"><span class="site-name">WSL - Ubuntu 20.04 LTS</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">WSL - Ubuntu 20.04 LTS</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-06-19T09:39:10.000Z" title="Created 2020-06-19 18:39:10">2020-06-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-06-19T09:39:10.000Z" title="Updated 2020-06-19 18:39:10">2020-06-19</time></span></div><div class="meta-secondline"></div></div></div><article class="container post-content" id="article-container"><p>WSL のUbuntu 20.04 LTS が公開されていたのでUbuntu 18.04 LTS から移行しました。</p>
<p>マイクロソフトストアには以下の3つのUbuntu が存在しています。「Ubuntu」からは<code>do-release-upgrade</code>でバージョンアップできるけれど、「Ubuntu 18.04 LTS」からはバージョンアップできないんですね。</p>
<ul>
<li>Ubuntu</li>
<li>Ubuntu-18.04</li>
<li>Ubuntu-20.04</li>
</ul>
<span id="more"></span>

<h3 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h3><ul>
<li>Windows 10 Insider Preview Build 20150<ul>
<li>移行前WSL<ul>
<li>Ubuntu 18.04 (Ubuntu 18.04 LTS)</li>
<li>bash 4.4.20</li>
<li>node v13.9.0</li>
<li>npm 6.13.7</li>
<li>Docker version 19.03.6</li>
<li>Docker Compose version 1.24.0</li>
</ul>
</li>
<li>移行後WSL<ul>
<li>Ubuntu (Ubuntu 20.04 LTS)</li>
<li>bash 5.0.16</li>
<li>node v14.4.0</li>
<li>npm 6.14.5</li>
<li>Docker version 19.03.11</li>
<li>Docker Compose version 1.26.0</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="構築"><a href="#構築" class="headerlink" title="構築"></a>構築</h3><h4 id="WSL-のインストール"><a href="#WSL-のインストール" class="headerlink" title="WSL のインストール"></a>WSL のインストール</h4><ol>
<li>マイクロソフトストアから「Ubuntu」をインストール</li>
<li>Ubuntu を起動してアカウント<code>ubuntu</code>を作成</li>
</ol>
<h3 id="WSL-側の設定"><a href="#WSL-側の設定" class="headerlink" title="WSL 側の設定"></a>WSL 側の設定</h3><h4 id="日本語設定"><a href="#日本語設定" class="headerlink" title="日本語設定"></a>日本語設定</h4><ul>
<li>日本語オンラインマニュアルのインストール<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo apt install language-pack-ja manpages-ja manpages-ja-dev</span><br><span class="line">$ sudo update-locale LANG=ja_JP.UTF8</span><br><span class="line">$ exit</span><br></pre></td></tr></table></figure></li>
<li>~&#x2F;.bash_aliases の設定<figure class="highlight bash"><figcaption><span>~/.bash_aliases</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">alias</span> upd=<span class="string">&#x27;sudo apt update &amp;&amp; sudo apt dist-upgrade &amp;&amp; sudo apt autoremove -y&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> en=<span class="string">&#x27;export LC_ALL=en_US.UTF8&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> ja=<span class="string">&#x27;export LC_ALL=ja_JP.UTF8&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">sshu</span></span>() &#123;</span><br><span class="line">  <span class="built_in">command</span> ssh ubuntu@192.168.11.<span class="variable">$1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h4><ul>
<li>n でNode.js をインストール<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> apt update &amp;&amp; <span class="built_in">sudo</span> apt upgrade</span><br><span class="line">$ <span class="built_in">sudo</span> apt install nodejs npm</span><br><span class="line">$ <span class="built_in">sudo</span> apt clean all</span><br><span class="line">$ <span class="built_in">sudo</span> npm install n -g</span><br><span class="line">$ <span class="built_in">sudo</span> n latest</span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">ln</span> -sf /usr/local/bin/node /usr/bin/node</span><br><span class="line">$ <span class="built_in">sudo</span> apt purge nodejs npm</span><br><span class="line">$ <span class="built_in">sudo</span> apt clean all</span><br><span class="line">$ <span class="built_in">sudo</span> apt autoremove</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Chinachu"><a href="#Chinachu" class="headerlink" title="Chinachu"></a>Chinachu</h4><ul>
<li>chinachu のインストール<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> apt install build-essential curl git-core vainfo python</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> npm install pm2 -g</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> pm2 startup</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> git://github.com/kanreisa/Chinachu.git ~/chinachu</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/chinachu/</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./chinachu installer</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> config.sample.json config.json</span></span><br></pre></td></tr></table></figure></li>
<li>~&#x2F;chinachu&#x2F;config.json の設定<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;uid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ubuntu&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;mirakurunPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://192.168.11.2:40772/&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;recordedDir&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;/mnt/j/home/chinachu/recorded/&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;wuiUsers&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li>
<li>起動<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> [] &gt; ~/chinachu/rules.json</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./chinachu service wui execute</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">問題なく起動できたらCtrl+\で終了</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./chinachu update</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">EPG取得テスト（エラーが出た場合は恐らく Mirakurun に接続できていません）</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> pm2 start processes.json</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> pm2 save</span></span><br></pre></td></tr></table></figure></li>
<li>起動スクリプト<figure class="highlight bash"><figcaption><span>/home/ubuntu/bin/wsl-chinachu.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /home/ubuntu/chinachu</span><br><span class="line">/usr/local/bin/pm2 restart processes.json</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h4><ul>
<li>Docker のインストール<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> apt install curl</span><br><span class="line">$ curl -fsSL https://get.docker.com/ | sh</span><br><span class="line">$ <span class="built_in">sudo</span> usermod -aG docker ubuntu</span><br><span class="line">$ <span class="built_in">sudo</span> /etc/init.d/docker start</span><br><span class="line">$ <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line"><span class="symbol">$</span> docker <span class="keyword">system</span> info</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h4><ul>
<li>最新版のDocker Compose をインストールするワンライナー<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl --silent <span class="string">&quot;https://api.github.com/repos/docker/compose/releases/latest&quot;</span> | jq --arg PLATFORM_ARCH <span class="string">&quot;<span class="subst">$(echo `uname -s`-`uname -m`)</span>&quot;</span> -r <span class="string">&#x27;.assets[] | select(.name | endswith($PLATFORM_ARCH)).browser_download_url&#x27;</span> | xargs <span class="built_in">sudo</span> curl -L -o /usr/local/bin/docker-compose --url &amp;&amp; <span class="built_in">sudo</span> <span class="built_in">chmod</span> 755 /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure></li>
<li>Portainer のインストール<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ wget https://downloads.portainer.io/docker-compose.yml</span><br><span class="line">$ docker-compose up -d</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h4><ul>
<li>hexo インストール<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;PATH=&quot;$PATH:./node_modules/.bin&quot;&#x27;</span> &gt;&gt; ~/.profile</span><br><span class="line">$ . ~/.profile</span><br><span class="line">$ npx hexo init blog</span><br><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ npm install</span><br><span class="line">$ npm i -S hexo-tag-googlecharts</span><br><span class="line">$ npm i -S hexo-tag-twitter</span><br><span class="line">$ npm i -S hexo-pdf</span><br><span class="line">$ npm i -S hexo-deployer-git</span><br><span class="line">$ npm i -S hexo-generator-search</span><br><span class="line">$ npm i -S hexo-generator-feed</span><br><span class="line">$ npm i -S hexo-related-popular-posts</span><br></pre></td></tr></table></figure></li>
<li>ライブラリの修正<br><a href="https://ktkr3d.github.io/2020/02/27/hexo-related-popular-posts/">https://ktkr3d.github.io/2020/02/27/hexo-related-popular-posts/</a></li>
<li>データの移行<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ scp -r ubuntu@localhost:/home/ubuntu/blog/_config.yml         ~/blog/</span><br><span class="line">$ scp -r ubuntu@localhost:/home/ubuntu/blog/google-services.pem ~/blog/</span><br><span class="line">$ scp -r ubuntu@localhost:/home/ubuntu/blog/source              ~/blog/</span><br><span class="line">$ scp -r ubuntu@localhost:/home/ubuntu/blog/scaffolds           ~/blog/</span><br><span class="line">$ scp -r ubuntu@localhost:/home/ubuntu/blog/themes/freemind     ~/blog/themes/</span><br></pre></td></tr></table></figure></li>
<li>キーの移行<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ scp -r ubuntu@localhost:/home/ubuntu/.ssh ~</span><br></pre></td></tr></table></figure></li>
<li>キャッシュのクリア<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="ポートフォワードの設定"><a href="#ポートフォワードの設定" class="headerlink" title="ポートフォワードの設定"></a>ポートフォワードの設定</h4><ul>
<li>ポートフォワードスクリプトの作成<figure class="highlight bash"><figcaption><span>/home/ubuntu/bin/wsl-portforward.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">IP=$(ip -f inet -o addr show eth0 | <span class="built_in">cut</span> -d\  -f 7 | <span class="built_in">cut</span> -d/ -f 1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> PORT <span class="keyword">in</span> 22 4000 8000 9000 20772; <span class="keyword">do</span></span><br><span class="line">  /mnt/c/Windows/system32/netsh.exe interface portproxy delete v4tov4 listenport=<span class="variable">$PORT</span></span><br><span class="line">  /mnt/c/Windows/system32/netsh.exe interface portproxy add    v4tov4 listenport=<span class="variable">$PORT</span> connectaddress=<span class="variable">$IP</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="sshd-の設定"><a href="#sshd-の設定" class="headerlink" title="sshd の設定"></a>sshd の設定</h4><ul>
<li>キーの作成<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> su</span><br><span class="line"><span class="comment"># ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key</span></span><br><span class="line"><span class="comment"># ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Windows-10-側の設定"><a href="#Windows-10-側の設定" class="headerlink" title="Windows 10 側の設定"></a>Windows 10 側の設定</h3><h4 id="WSL-のデフォルトを変更"><a href="#WSL-のデフォルトを変更" class="headerlink" title="WSL のデフォルトを変更"></a>WSL のデフォルトを変更</h4><ul>
<li>コマンドプロンプトでWSL のデフォルトをUbuntu に変更<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">wslconfig /list</span></span><br><span class="line">Linux 用 Windows サブシステム ディストリビューション:</span><br><span class="line">Ubuntu-18.04 (既定)</span><br><span class="line">Ubuntu</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">wslconfig /setdefault Ubuntu</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">wslconfig /list</span></span><br><span class="line">Ubuntu (既定)</span><br><span class="line">Ubuntu-18.04</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="タスクスケジューラの設定"><a href="#タスクスケジューラの設定" class="headerlink" title="タスクスケジューラの設定"></a>タスクスケジューラの設定</h4><ul>
<li>ポートフォワードの自動設定<br>名称: <code>wsl-portforward</code><br>プログラム: <code>wsl</code><br>引数: <code>-u root bash /home/ubuntu/bin/wsl-portforward.sh</code><br>権限昇格: あり</li>
<li>sshd の自動起動<br>名称: <code>wsl-sshd</code><br>プログラム: <code>wsl</code><br>引数: <code>-u root bash service ssh restart</code><br>権限昇格: あり</li>
<li>chinachu の自動起動<br>名称: <code>wsl-chinachu</code><br>プログラム: <code>wsl</code><br>引数: <code>-u root bash /home/ubuntu/bin/wsl-chinachu.sh</code><br>権限昇格: あり</li>
<li>docker の自動起動<br>名称: <code>wsl-docker</code><br>プログラム: <code>wsl</code><br>引数: <code>-u root -- /etc/init.d/docker start</code><br>権限昇格: あり</li>
</ul>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ubuntu/">ubuntu</a><a class="post-meta__tags" href="/tags/wsl/">wsl</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2020/07/02/Ray-tracing-in-Nim-on-WSL/" title="Ray tracing in Nim on WSL"><img class="cover" src="/images/trace-of-radiance.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Ray tracing in Nim on WSL</div></div><div class="info-2"><div class="info-item-1">https://nim-lang.org/blog/2020/06/30/ray-tracing-in-nim.htmlWSL 上のNim 言語でレイトレースしてみました。   環境 Windows 10 Insider Preview Build 20161 WSL2 (Ubuntu 20.04 LTS) nim 1.2.4      構築WSL 側 nim のインストール    $ curl https://nim-lang.org/choosenim/init.sh -sSf | sh   $HOME/.profileexport PATH=$HOME/.nimble/bin:$PATH  clang のインストール    $ sudo apt install clang  利用Trace of Radiancehttps://github.com/mratsim/trace-of-radiance $ git clone https://github.com/mratsim/trace-of-radiance$ cd trace-of-radiance$ git chec...</div></div></div></a><a class="pagination-related" href="/2020/06/11/Windows-10-Build-19645-WSL-2/" title="Windows 10 Build 19645 + WSL 2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Windows 10 Build 19645 + WSL 2</div></div><div class="info-2"><div class="info-item-1">https://docs.microsoft.com/ja-jp/windows/wsl/wsl2-kernel Windows 10 Insider Preview Build 19645 をインストールしたらWSL2 が起動しなくなりました。Kernel の更新方法が変わったようです。 以下のMSI をインストールすると復帰しました。https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi 2020-06-18 追記Windows 10 Insider Preview Build 20150 へ更新することで、コマンドプロンプトからwsl --update で更新できるようになったようです。 C:\&gt;wsl --update更新をチェック中...利用できる更新はありません。カーネル バージョン: 4.19.104    環境 Windows 10 Insider Preview Build 19645  構築 以下のページを参照https://docs.microsoft.com/j...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2018/04/13/Ubuntu-18-04-bionic/" title="Ubutu 18.04 bionic beta2"><img class="cover" src="/images/ubuntu-bionic.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-04-13</div><div class="info-item-2">Ubutu 18.04 bionic beta2</div></div><div class="info-2"><div class="info-item-1"> DELL Inspiron 11 にUbuntu 18.04 bionic beta2 をインストールしてみました。  Ubuntu Livepatch も設定してみました。    インストールメディアhttp://cdimage.ubuntu.com/daily-live/current/ デイリービルドのライブISOをEtcher でUSBメモリに格納しました。 GNOME の設定 ホームディレクトリの各フォルダ名を英語名に変更$ LANG=C xdg-user-dirs-gtk-update テキストテンプレートファイルの作成$ touch ~/Templates/Text alias の設定  ~/.bash_aliasesalias upd=&#x27;sudo apt update -y &amp;&amp; sudo apt dist-upgrade &amp;&amp; sudo apt autoremove -y&#x27;alias en=&#x27;export LC_ALL=en_US.UTF8&#x27;alias ja=&#x27;export LC...</div></div></div></a><a class="pagination-related" href="/2022/02/08/Develop-Environment-on-WSL/" title="Development Environment on WSL"><img class="cover" src="/images/wsl-dev.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-08</div><div class="info-item-2">Development Environment on WSL</div></div><div class="info-2"><div class="info-item-1">https://github.com/coder/code-server WSL にこっそり開発環境を構築しようと思います。Microsoft Store が利用不可、インターネットアクセスに認証プロキシが存在する環境とします。 実現する機能 WSL2 (Ubuntu 20.04, systemd 有効化) Code Server (Web版Visual Studio Code)をPWA化 Code Server の拡張機能 Japanese Language Pack (日本語化) Project Manager Activitus Bar Draw.io (図形エディタ)   Gitea (Git リポジトリ管理) SliDev (スライド)    環境   項目 値    認証プロキシ環境 http://hoge:fuga@100.100.100.100:8080   ローカルホスト: OS Windows 10 Pro + WSL2   ローカルホスト: WSL WSL2 (Ubuntu 20.4)   ローカルホスト: Microsoft Store 利用不可   ロー...</div></div></div></a><a class="pagination-related" href="/2014/09/27/ubuntu-gnome-14-dot-10-plus-gnome-3-dot-14-plus-wayland/" title="Ubuntu GNOME 14.10 + GNOME 3.14 + Wayland"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2014-09-27</div><div class="info-item-2">Ubuntu GNOME 14.10 + GNOME 3.14 + Wayland</div></div><div class="info-2"><div class="info-item-1"> Ubuntu GNOME 14.10 Beta + GNOME 3.14 (3.13.92) をWayland で動かしてみました。テキトーにやっているので、本当にWayland が有効になっているのか、怪しいですけれど。 $ ps -ef | grep waylandhoge      1376  1344  0 17:36 ?        00:00:00 gnome-session --session=gnome-waylandhoge      1454  1376  0 17:36 ?        00:00:00 /usr/bin/ssh-agent /usr/bin/dbus-launch --exit-with-session /usr/bin/im-launch gnome-session --session=gnome-waylandhoge      1457     1  0 17:36 ?        00:00:00 /usr/bin/dbus-launch --exit-with-session /usr/bin/im-launch gnom...</div></div></div></a><a class="pagination-related" href="/2020/05/07/APT-Hash-sum-mismatch-error/" title="APT Hash Sum mismatch error"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-07</div><div class="info-item-2">APT Hash Sum mismatch error</div></div><div class="info-2"><div class="info-item-1">ubuntu@ubuntu:~$ sudo apt update...Get:4 http://jp.archive.ubuntu.com/ubuntu focal/main i386 Packages [718 kB]    Err:4 http://jp.archive.ubuntu.com/ubuntu focal/main i386 Packages  Hash Sum mismatch  Hashes of expected file:   - Filesize:4216000 [weak]   - SHA256:5f5fa48d499be259adcdd1d6dea4e6588a3473e0290460ead99ea945b141815d   - SHA1:8f477673f5aa0ca860273e9a0ffc53515baa1032 [weak]   - MD5Sum:021fb704764554808a9ec3b18e16599e [weak]  Hashes of received file:   - SHA256:4f406937d7384fd444d236...</div></div></div></a><a class="pagination-related" href="/2019/08/15/RPi4-Ubuntu-Server-19-10-64bit-%E6%9B%B4%E6%96%B0/" title="RPi4 - Ubuntu Server 19.10 64bit 更新"><img class="cover" src="/images/rpi4-aarch64-4gbmem.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-08-15</div><div class="info-item-2">RPi4 - Ubuntu Server 19.10 64bit 更新</div></div><div class="info-2"><div class="info-item-1">https://github.com/satmandu/docker-rpi4-imagebuilder/https://github.com/raspberrypi/linux/pull/3144 とうとうRaspberry Pi 4B のUbuntu Server 19.10 64bit (aarch64) で4GBメモリとUSBが動作するようになりました。USB を動作させるためにメモリを3GB に制限する必要が無くなりました。   イメージ作成手順https://github.com/satmandu/docker-rpi4-imagebuilder/ Docker のインストールdocker-ce をインストールしたらkernel が5 にあがってしまい、うまく再起動できませんでした。とりあえず、Ubuntu のリポジトリの古いDocker を使うことにします。 $ sudo apt install docker docker-compose$ sudo usermod -aG docker $USER$ docker --versionDocker version 1...</div></div></div></a><a class="pagination-related" href="/2016/07/09/Ajenti-on-Raspberry-Pi-2/" title="Ajenti on Raspberry Pi 2"><img class="cover" src="/images/ajenti.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2016-07-09</div><div class="info-item-2">Ajenti on Raspberry Pi 2</div></div><div class="info-2"><div class="info-item-1"> http://ajenti.org/ Web ベースのシステム管理ツールのAjenti をRaspberry Pi 2 のUbuntu 16.04 LTS にインストールしてみました。   OS のアップグレードその前に、Ubuntu 14.04 LTS を16.04 LTS にアップグレードしておきましょう。 https://www.digitalocean.com/community/tutorials/how-to-upgrade-to-ubuntu-16-04-lts $ sudo apt-get update$ sudo apt-get upgrade$ sudo apt-get dist-upgrade$ sudo apt-get dist-upgrade -d$ sudo apt-get install update-manager-core$ sudo do-release-upgrade$ sudo reboot  Ajenti のインストールhttp://support.ajenti.org/topics/1121-installing-on-ubuntu/...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">ktkr3d</div><div class="author-info-description">Memorandum</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">487</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">197</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ktkr3d"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/ktkr3d" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://gist.github.com/ktkr3d" target="_blank" title="Gist"><i class="fas fa-code" style="color: #24292e;"></i></a><a class="social-icon" href="https://x.com/ktkr3d" target="_blank" title="X"><i class="fab fa-x-twitter" style="color: #24292e;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%92%B0%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">環境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A7%8B%E7%AF%89"><span class="toc-number">2.</span> <span class="toc-text">構築</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#WSL-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><span class="toc-number">2.1.</span> <span class="toc-text">WSL のインストール</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WSL-%E5%81%B4%E3%81%AE%E8%A8%AD%E5%AE%9A"><span class="toc-number">3.</span> <span class="toc-text">WSL 側の設定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%A8%AD%E5%AE%9A"><span class="toc-number">3.1.</span> <span class="toc-text">日本語設定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Node-js"><span class="toc-number">3.2.</span> <span class="toc-text">Node.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Chinachu"><span class="toc-number">3.3.</span> <span class="toc-text">Chinachu</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Docker"><span class="toc-number">3.4.</span> <span class="toc-text">Docker</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-Compose"><span class="toc-number">3.5.</span> <span class="toc-text">Docker Compose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hexo"><span class="toc-number">3.6.</span> <span class="toc-text">Hexo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%9D%E3%83%BC%E3%83%88%E3%83%95%E3%82%A9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E8%A8%AD%E5%AE%9A"><span class="toc-number">3.7.</span> <span class="toc-text">ポートフォワードの設定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sshd-%E3%81%AE%E8%A8%AD%E5%AE%9A"><span class="toc-number">3.8.</span> <span class="toc-text">sshd の設定</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-10-%E5%81%B4%E3%81%AE%E8%A8%AD%E5%AE%9A"><span class="toc-number">4.</span> <span class="toc-text">Windows 10 側の設定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#WSL-%E3%81%AE%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%82%92%E5%A4%89%E6%9B%B4"><span class="toc-number">4.1.</span> <span class="toc-text">WSL のデフォルトを変更</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%BF%E3%82%B9%E3%82%AF%E3%82%B9%E3%82%B1%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%A9%E3%81%AE%E8%A8%AD%E5%AE%9A"><span class="toc-number">4.2.</span> <span class="toc-text">タスクスケジューラの設定</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/06/Faugus-Launcher/" title="Faugus Launcher">Faugus Launcher</a><time datetime="2025-12-06T06:14:20.000Z" title="Created 2025-12-06 15:14:20">2025-12-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/01/SDDM/" title="SDDM">SDDM</a><time datetime="2025-12-01T08:35:57.000Z" title="Created 2025-12-01 17:35:57">2025-12-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/30/Walker/" title="Walker">Walker</a><time datetime="2025-11-30T13:18:02.000Z" title="Created 2025-11-30 22:18:02">2025-11-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/29/CachyOS/" title="CachyOS">CachyOS</a><time datetime="2025-11-28T23:05:23.000Z" title="Created 2025-11-29 08:05:23">2025-11-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/17/Caelestia/" title="Caelestia">Caelestia</a><time datetime="2025-11-17T13:18:22.000Z" title="Created 2025-11-17 22:18:22">2025-11-17</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/travel.png);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2010 - 2025 By ktkr3d</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null
  const getUtterancesTheme = theme => theme === 'dark' ? 'photon-dark' : 'github-light'

  const loadUtterances = (el = document, key) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyUtterances = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const config = {
      src: 'https://utteranc.es/client.js',
      repo: 'ktkr3d/ktkr3d.github.io',
      theme: getUtterancesTheme(document.documentElement.getAttribute('data-theme')),
      crossorigin: 'anonymous',
      async: true,
      ...option,
      'issue-term': isShuoshuo ? key : (option && option['issue-term']) || 'pathname'
    }

    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => ele.setAttribute(key, value))
    el.querySelector('#utterances-wrap').appendChild(ele)
  }

  const changeUtterancesTheme = theme => {
    const iframe = document.querySelector('#utterances-wrap iframe')
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: getUtterancesTheme(theme)
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es')
    }
  }

  btf.addGlobalFn('themeChange', changeUtterancesTheme, 'utterances')

  if (isShuoshuo) {
    'Utterances' === 'Utterances'
      ? window.shuoshuoComment = { loadComment: loadUtterances }
      : window.loadOtherComment = loadUtterances
    return
  }
  
  if ('Utterances' === 'Utterances' || !false) {
    if (false) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
    else loadUtterances()
  } else {
    window.loadOtherComment = loadUtterances
  }
})()</script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="local-search-input"><input placeholder="Search for Posts" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>