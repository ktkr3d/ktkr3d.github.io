<!DOCTYPE html><html lang="jp" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>hexo-related-popular-posts プラグイン | Memorandum!</title><meta name="author" content="ktkr3d"><meta name="copyright" content="ktkr3d"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="https:&#x2F;&#x2F;github.com&#x2F;tea3&#x2F;hexo-related-popular-postshexo-related-popular-posts プラグインは関連記事や人気の記事一覧を生成するHexo のプラグインです。freemind テーマで関連記事を表示してみました。Google Analytics API で収集した情報で人気の記事も表示してみました。">
<meta property="og:type" content="article">
<meta property="og:title" content="hexo-related-popular-posts プラグイン">
<meta property="og:url" content="https://ktkr3d.github.io/2020/02/27/hexo-related-popular-posts/index.html">
<meta property="og:site_name" content="Memorandum!">
<meta property="og:description" content="https:&#x2F;&#x2F;github.com&#x2F;tea3&#x2F;hexo-related-popular-postshexo-related-popular-posts プラグインは関連記事や人気の記事一覧を生成するHexo のプラグインです。freemind テーマで関連記事を表示してみました。Google Analytics API で収集した情報で人気の記事も表示してみました。">
<meta property="og:locale">
<meta property="og:image" content="https://hexo.io/icon/favicon-196x196.png">
<meta property="article:published_time" content="2020-02-27T12:33:00.000Z">
<meta property="article:modified_time" content="2020-02-27T12:33:00.000Z">
<meta property="article:author" content="ktkr3d">
<meta property="article:tag" content="freemind">
<meta property="article:tag" content="hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hexo.io/icon/favicon-196x196.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "hexo-related-popular-posts プラグイン",
  "url": "https://ktkr3d.github.io/2020/02/27/hexo-related-popular-posts/",
  "image": "https://hexo.io/icon/favicon-196x196.png",
  "datePublished": "2020-02-27T12:33:00.000Z",
  "dateModified": "2020-02-27T12:33:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "ktkr3d",
      "url": "https://ktkr3d.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://ktkr3d.github.io/2020/02/27/hexo-related-popular-posts/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-MG6LWTJBY0"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-MG6LWTJBY0')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-MG6LWTJBY0', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":false,"highlightLang":false,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'medium_zoom',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'hexo-related-popular-posts プラグイン',
  isHighlightShrink: undefined,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><script type="text/javascript" src="//www.google.com/jsapi"></script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/rss.xml" title="Memorandum!" type="application/rss+xml">
</head><body><div class="bg-animation" id="web_bg" style="background-color: rgb(227, 233, 199);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">491</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">202</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Memorandum!</span></a><a class="nav-page-title" href="/"><span class="site-name">hexo-related-popular-posts プラグイン</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/To-Do/"><i class="fa-fw fa-solid fa-list"></i><span> To Do</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">hexo-related-popular-posts プラグイン</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-02-27T12:33:00.000Z" title="Created 2020-02-27 21:33:00">2020-02-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-02-27T12:33:00.000Z" title="Updated 2020-02-27 21:33:00">2020-02-27</time></span></div><div class="meta-secondline"></div></div></div><article class="container post-content" id="article-container"><p><a target="_blank" rel="noopener" href="https://github.com/tea3/hexo-related-popular-posts">https://github.com/tea3/hexo-related-popular-posts</a><br>hexo-related-popular-posts プラグインは関連記事や人気の記事一覧を生成するHexo のプラグインです。<br>freemind テーマで関連記事を表示してみました。<br>Google Analytics API で収集した情報で人気の記事も表示してみました。</p>
<span id="more"></span>

<h3 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h3><ul>
<li>WSL</li>
<li>nodejs v13.9.0</li>
<li>npm 6.13.7</li>
<li>hexo 4.2.0</li>
<li><a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-theme-freemind/">hexo-theme-freemind</a></li>
</ul>
<h3 id="構築-関連記事"><a href="#構築-関連記事" class="headerlink" title="構築 - 関連記事"></a>構築 - 関連記事</h3><h4 id="インストール"><a href="#インストール" class="headerlink" title="インストール"></a>インストール</h4><ul>
<li>hexo-related-popular-posts パッケージ</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-related-popular-posts --save</span><br></pre></td></tr></table></figure>

<h4 id="ga-analytics-の修正"><a href="#ga-analytics-の修正" class="headerlink" title="ga-analytics の修正"></a>ga-analytics の修正</h4><ul>
<li>コールバック関数関連のエラーを修正</li>
</ul>
<figure class="highlight javascript"><figcaption><span>.&#x2F;node_modules&#x2F;ga-analytics&#x2F;module.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//fs.writeFile(sessionFile, JSON.stringify(result));</span></span><br><span class="line">fs.<span class="title function_">writeFile</span>(sessionFile, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(result), <span class="keyword">function</span>(<span class="params">err</span>) &#123;&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>res がundefined だったらスキップ</li>
</ul>
<figure class="highlight javascript"><figcaption><span>.&#x2F;node_modules&#x2F;ga-analytics&#x2F;bin&#x2F;ga-analytics</span></figcaption><table><tr><td class="gutter"><pre><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//if(program.json) &#123;</span></span><br><span class="line"><span class="keyword">if</span>(res === <span class="literal">undefined</span>) &#123;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(program.<span class="property">json</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br></pre></td></tr></table></figure>

<h4 id="freemind-テーマの設定"><a href="#freemind-テーマの設定" class="headerlink" title="freemind テーマの設定"></a>freemind テーマの設定</h4><ul>
<li>関連記事の一覧を表示</li>
</ul>
<figure class="highlight html"><figcaption><span>.&#x2F;themes&#x2F;freemind&#x2F;layout&#x2F;_partial&#x2F;article.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- related posts --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">id</span>=<span class="string">&quot;related_posts&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&lt;%= __(&#x27;related_posts&#x27;) %&gt;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">&lt;%- popular_posts( &#123;&#125; , item ) %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>関連記事の日本語タイトルを設定</li>
</ul>
<figure class="highlight yaml"><figcaption><span>.&#x2F;themes&#x2F;freemind&#x2F;languages&#x2F;ja_JP.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">related_posts:</span> <span class="string">&quot;関連記事&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>スタイルの設定</li>
</ul>
<figure class="highlight css"><figcaption><span>.&#x2F;themes&#x2F;freemind&#x2F;source&#x2F;css&#x2F;style.css</span></figcaption><table><tr><td class="gutter"><pre><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.popular-posts</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">list-style</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.popular-posts</span> <span class="selector-tag">h3</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#337ab7</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.0em</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5em</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.popular-posts</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\f016&quot;</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: FontAwesome;</span><br><span class="line">  <span class="attribute">padding-right</span>:<span class="number">0.3em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Hexo-の設定"><a href="#Hexo-の設定" class="headerlink" title="Hexo の設定"></a>Hexo の設定</h4><ul>
<li>「形態素解析」で関連記事を表示する場合</li>
</ul>
<figure class="highlight yaml"><figcaption><span>.&#x2F;_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Popular Posts</span></span><br><span class="line"><span class="attr">popularPosts:</span></span><br><span class="line">  <span class="attr">morphologicalAnalysis:</span> </span><br></pre></td></tr></table></figure>

<h3 id="構築-人気の記事"><a href="#構築-人気の記事" class="headerlink" title="構築 - 人気の記事"></a>構築 - 人気の記事</h3><h4 id="hexo-related-popular-posts-の修正"><a href="#hexo-related-popular-posts-の修正" class="headerlink" title="hexo-related-popular-posts の修正"></a>hexo-related-popular-posts の修正</h4><ul>
<li>エラーが出たので修正</li>
</ul>
<figure class="highlight javascript"><figcaption><span>.&#x2F;node_modules&#x2F;hexo-related-popular-posts&#x2F;lib&#x2F;list-json.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( <span class="title class_">Number</span>(inOptions.<span class="property">PPMixingRate</span>) != <span class="number">1.0</span> ) &#123;</span><br><span class="line">    <span class="comment">// -------------------------------------------</span></span><br><span class="line">    <span class="comment">// Related posts (tag)</span></span><br><span class="line">    <span class="comment">// -------------------------------------------</span></span><br><span class="line">    <span class="keyword">if</span> (postData) &#123;</span><br><span class="line">        <span class="comment">//if (postData.tags &amp;&amp; postData.tags.length &gt; 0) &#123;</span></span><br><span class="line">        <span class="keyword">if</span> (postData.<span class="property">tags</span> &amp;&amp; postData.<span class="property">tags</span>.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; postData.<span class="property">tags</span>.<span class="property">each</span>) &#123;</span><br><span class="line">            postData.<span class="property">tags</span>.<span class="title function_">each</span>(<span class="function">(<span class="params">tag</span>) =&gt;</span> &#123;</span><br></pre></td></tr></table></figure>
<ul>
<li>エラーが出たので修正 (2022-04-14)</li>
</ul>
<figure class="highlight javascript"><figcaption><span>.&#x2F;node_modules&#x2F;hexo-related-popular-posts&#x2F;lib&#x2F;list-json.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// filtering items category</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; config.<span class="property">popularPosts</span>.<span class="property">tmp</span>.<span class="property">gaData</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="comment">//if (config.popularPosts.tmp.gaData[i].date != &#x27;&#x27;) &#123;</span></span><br><span class="line">        <span class="keyword">if</span> (config.<span class="property">popularPosts</span>.<span class="property">tmp</span>.<span class="property">gaData</span>[i] != &amp;&amp; </span><br><span class="line">            config.<span class="property">popularPosts</span>.<span class="property">tmp</span>.<span class="property">gaData</span>[i].<span class="property">date</span> != &amp;&amp; </span><br><span class="line">            config.<span class="property">popularPosts</span>.<span class="property">tmp</span>.<span class="property">gaData</span>[i].<span class="property">date</span> != <span class="literal">undefined</span> &amp;&amp; </span><br><span class="line">            config.<span class="property">popularPosts</span>.<span class="property">tmp</span>.<span class="property">gaData</span>[i].<span class="property">date</span> != <span class="string">&#x27;&#x27;</span>) &#123;</span><br></pre></td></tr></table></figure>

<ul>
<li>PV データを必ず取得</li>
</ul>
<figure class="highlight javascript"><figcaption><span>.&#x2F;node_modules&#x2F;hexo-related-popular-posts&#x2F;lib&#x2F;googleAnalytics.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">getPVfromGA</span> = (<span class="params">inHexo</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> gaData</span><br><span class="line"></span><br><span class="line">        <span class="comment">// load google analytics data</span></span><br><span class="line">        <span class="comment">//if (inHexo.config.popularPosts.tmp.isGaUpdate) &#123;</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span>) &#123;</span><br></pre></td></tr></table></figure>

<h4 id="freemind-テーマの設定-1"><a href="#freemind-テーマの設定-1" class="headerlink" title="freemind テーマの設定"></a>freemind テーマの設定</h4><ul>
<li>人気の記事のウィジェットを追加</li>
</ul>
<figure class="highlight html"><figcaption><span>.&#x2F;themes&#x2F;freemind&#x2F;layout&#x2F;_widget&#x2F;popular_posts.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (site.posts.length)&#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;widget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&lt;%= __(&#x27;popular_posts&#x27;) %&gt;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">  &lt;%-</span><br><span class="line">  popular_posts(&#123;maxCount: 10 , ulClass: &#x27;popular-posts&#x27; , PPMixingRate: 1.0 , isExcerpt: false&#125;)</span><br><span class="line">  %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>人気の記事の日本語タイトルを設定</li>
</ul>
<figure class="highlight yaml"><figcaption><span>.&#x2F;themes&#x2F;freemind&#x2F;languages&#x2F;ja_JP.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">popular_posts:</span> <span class="string">&quot;人気の記事&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>人気の記事のウィジェットを有効化</li>
</ul>
<figure class="highlight yaml"><figcaption><span>.&#x2F;themes&#x2F;freemind&#x2F;_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">widgets:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">search</span></span><br><span class="line"><span class="comment">#- recent_comments</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">recent_posts</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">popular_posts</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">links</span></span><br><span class="line"><span class="comment">#- category</span></span><br><span class="line"><span class="comment">#- tagcloud</span></span><br></pre></td></tr></table></figure>

<h4 id="Hexo-の設定-1"><a href="#Hexo-の設定-1" class="headerlink" title="Hexo の設定"></a>Hexo の設定</h4><ul>
<li>Google Analytics API の設定</li>
</ul>
<figure class="highlight yaml"><figcaption><span>.&#x2F;_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">popularPosts:</span></span><br><span class="line">  <span class="attr">morphologicalAnalysis:</span> </span><br><span class="line">  <span class="attr">googleAnalyticsAPI:</span></span><br><span class="line">    <span class="attr">clientId:</span> <span class="string">******.apps.googleusercontent.com</span></span><br><span class="line">    <span class="attr">serviceEmail:</span> <span class="string">*****@developer.gserviceaccount.com</span></span><br><span class="line">    <span class="attr">key:</span> <span class="string">/hexo-project-root/path/to/google-services.pem</span></span><br><span class="line">    <span class="attr">viewId:</span> <span class="number">12345678</span></span><br><span class="line">    <span class="attr">dateRange:</span> <span class="number">30</span></span><br><span class="line">    <span class="attr">expiresDate:</span> <span class="number">10</span>  </span><br></pre></td></tr></table></figure>

<h3 id="実行"><a href="#実行" class="headerlink" title="実行"></a>実行</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure>

<h3 id="利用"><a href="#利用" class="headerlink" title="利用"></a>利用</h3><p>記事にタグをつけます。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/hexo/">hexo</a><a class="post-meta__tags" href="/tags/freemind/">freemind</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2020/04/21/Feedbro-RSS-Japanese-language/" title="Feedbro RSS Japanese language"><img class="cover" src="/images/feedbro_japanese_locale.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Feedbro RSS Japanese language</div></div><div class="info-2"><div class="info-item-1">https://github.com/ktkr3d/feedbro-locale Google Chrome のフィードリーダ拡張機能Feedbro の日本語翻訳ファイル Ver. 0.1 を作ってみました。原文は丁寧な表現ですが、できる限り短い表現にしました。まだ全部を翻訳できていません。引き続き仕様を確認しながら翻訳を進めたいと思います。   環境 Google Chrome 81 Feedbro 4.1.3  構築 Chrome でFeedbro アイコンからOptionsメニューを選択 Settings のImport Locale ボタンをクリック 以下のURLを入力してOK  https://raw.githubusercontent.com/ktkr3d/feedbro-locale/master/feedbro-locale-ja_JP.json 最新版の翻訳を反映するには言語を更新ボタンをクリック  </div></div></div></a><a class="pagination-related" href="/2020/02/19/urlencode-urldecode/" title="URL エンコード / デコード"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">URL エンコード / デコード</div></div><div class="info-2"><div class="info-item-1">URL エンコードされた文字列をデコードして使いたい時がありますよね。bash のfunction で書いてみました。csh ならalias で書けそうです。   環境 WSL (Ubuntu 18.04)  構築 nkf パッケージのインストール  $ sudo apt install nkf   function(関数)の定義  ~/.bash_aliases# URL Encode / Decodefunction urlencode &#123;  echo $1 | nkf -WwMQ | tr = % | sed &#x27;:a;N;$!ba;s/%\n//g&#x27;&#125;function urldecode &#123;  echo $1 | nkf -w --url-input&#125;  実行 再ログインする 即時反映したい場合  $ . ~/.bash_aliases  利用 URL エンコード (対象のURL文字列をダブルクォートで囲います)  $ urlencode &quot;https://ktkr3d.github.io/こんな URL...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2016/04/09/Customize-Hexo-Theme-Freemind/" title="Customize Hexo Theme Freemind"><img class="cover" src="/images/freemind-navbar-dropdown.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2016-04-09</div><div class="info-item-2">Customize Hexo Theme Freemind</div></div><div class="info-2"><div class="info-item-1">Hexo のテーマFreemind のナビゲーションバーの右端にページを選択するドロップダウンメニューを追加しました。 以下の２つのカスタマイズをします。  ページの一覧データ ページ一覧を生成するコード     ページ一覧データ_config.yml にページの一覧を作ります。    項目 内容    title 題名   url 相対URL   intro ツールチップの説明文   icon アイコン   ./themes/freemind/_config.ymlpages:  - title: Android    url:   android    intro: &quot;Android&quot;    icon:  &quot;fa fa-file&quot;  - title: Android-x86    url:   android-x86    intro: &quot;Android-x86&quot;    icon:  &quot;fa fa-file&quot;  - title: Atom    url:   atom    intro: &quo...</div></div></div></a><a class="pagination-related" href="/2019/08/14/Hexo-App-Template-on-RPi4-64bit/" title="Hexo App Template"><img class="cover" src="/images/app-template-hexo.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-08-14</div><div class="info-item-2">Hexo App Template</div></div><div class="info-2"><div class="info-item-1">Portainer には41 個のApp Template が登録されていますが、独自に追加することもできるようになっています。App Template にHexo を追加してみました。 Portainer のApp Template には3種類あります。  Container (DockerHub) Swarm stack (Swarm) Compose stack (Compose)  Container 型でDockerHub のHexo をデプロイしようとしましたが、aarch64 の環境では失敗してしまいました。そのため、ローカルビルドするようなCompose 型スクリプトで登録することにしました。Raspberry Pi 4B 環境でデプロイが完了する迄に5分くらいかかりました。   環境 Raspberry Pi 4B Ubuntu Server 19.10 aarch64 Docker 19.03.1, build 74b1e89 Docker Compose 1.21.0 Portainer 1.22.0  Portainer の操作App Template の...</div></div></div></a><a class="pagination-related" href="/2023/12/09/Hexo-Theme-Butterfly/" title="Hexo Theme Butterfly"><img class="cover" src="/images/hexo-theme-butterfly.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-09</div><div class="info-item-2">Hexo Theme Butterfly</div></div><div class="info-2"><div class="info-item-1">https://github.com/jerryc127/hexo-theme-butterfly モダンで多機能なHexo のテーマButterflyを使ってみました。あまりにも多機能なのでシンプルになるように設定しました。パッケージ版を導入して、オリジナルのスクリプトは修正しないようにしました。   環境 WSL(Ubuntu 22.04) on Windows 11 nodejs v20.10.0 npm 10.2.3 hexo 7.0.0 hexo-theme-butterfly 4.11.0  ソフトウェアのインストールHexoのインストールhttps://hexo.io/ npm install hexo-cli -ghexo init blogcd blognpm install  Butterflyテーマのインストールhttps://github.com/jerryc127/hexo-theme-butterfly npm install hexo-theme-butterflynpm install hexo-renderer-pug hexo-renderer...</div></div></div></a><a class="pagination-related" href="/2015/02/05/Hexo-Helper-Shell-Script/" title="Hexo Helper Shell Script"><img class="cover" src="/images/hexo-helper.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2015-02-05</div><div class="info-item-2">Hexo Helper Shell Script</div></div><div class="info-2"><div class="info-item-1"> Hexo をGUI で支援するスクリプトをzenity で書いてみました。   シェルスクリプトコマンドラインでHEXO を操作できる環境が整っていることが前提です。 /PATH/TO/hexo-helper.sh#!/bin/bash[[ -s &quot;$HOME/.nvm/nvm.sh&quot; ]] &amp;&amp; . &quot;$HOME/.nvm/nvm.sh&quot;nvm use v0.10 &gt; /dev/nullexport NODE_PATH=$&#123;NVM_PATH&#125;_modulesSOURCE_REPOSITORY=bitbucketif [ $# -lt 1 ] ; then	zenity --error --text=&quot;Usage: hexo-helper.sh hexo_path&quot;	exit 1fiHEXODIR=$1if ! [ -d $HEXODIR ] ; then    zenity --error --text=&quot;Bad directory.&quot;    exit 1...</div></div></div></a><a class="pagination-related" href="/2016/08/30/Hexo-update/" title="Hexo update"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2016-08-30</div><div class="info-item-2">Hexo update</div></div><div class="info-2"><div class="info-item-1">codeblock の表現を柔軟に設定するために、Hexo をアップデートしてみました。以下の構文で利用できます。開発者の皆さんに感謝です。 &#123;% codeblock [title] [lang:language] [url] [link text] [line_number:(true|false)] [highlight:(true|false)] [first_line:number] %&#125; code snippet&#123;% endcodeblock %&#125;    Hexo のアップデート$ sudo npm update hexo -g$ npm update  _config.yml4041424344highlight:  enable: true  line_number: false  auto_detect: false  tab_replace:  動作確認行番号なし$ pwd  行番号ありsample.c123456#include &lt;stdio.h&gt;main( )&#123;        printf(&qu...</div></div></div></a><a class="pagination-related" href="/2023/12/02/Hexo-7-0-freemind/" title="Hexo 7.0 + Freemind + Travel"><img class="cover" src="/images/hexo-freemind-travel.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-02</div><div class="info-item-2">Hexo 7.0 + Freemind + Travel</div></div><div class="info-2"><div class="info-item-1">https://hexo.io/news/2023/11/03/hexo-7-0-0-released/https://github.com/wzpan/hexo-theme-freemind/https://github.com/ktkr3d/hexo-theme-freemind-travel Hexo 7.0 がリリースされたので新規に環境を構築してみよう。FreemindテーマとTravelカラーテーマを設定します。   環境 WSL(Ubuntu 22.04) on Windows 11 nodejs v20.10.0 npm 10.2.3 hexo 7.0.0  構築 Hexo 7.0のインストールhttps://hexo.io/  npm install hexo-cli -ghexo init blogcd blognpm install   Freemind テーマのインストールhttps://github.com/wzpan/hexo-theme-freemind  git clone https://github.com/wzpan/hexo-theme-f...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">ktkr3d</div><div class="author-info-description">Memorandum</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">491</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">202</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ktkr3d"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/ktkr3d" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://gist.github.com/ktkr3d" target="_blank" title="Gist"><i class="fas fa-code" style="color: #24292e;"></i></a><a class="social-icon" href="https://x.com/ktkr3d" target="_blank" title="X"><i class="fab fa-x-twitter" style="color: #24292e;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%92%B0%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">環境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A7%8B%E7%AF%89-%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B"><span class="toc-number">2.</span> <span class="toc-text">構築 - 関連記事</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><span class="toc-number">2.1.</span> <span class="toc-text">インストール</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ga-analytics-%E3%81%AE%E4%BF%AE%E6%AD%A3"><span class="toc-number">2.2.</span> <span class="toc-text">ga-analytics の修正</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#freemind-%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E8%A8%AD%E5%AE%9A"><span class="toc-number">2.3.</span> <span class="toc-text">freemind テーマの設定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hexo-%E3%81%AE%E8%A8%AD%E5%AE%9A"><span class="toc-number">2.4.</span> <span class="toc-text">Hexo の設定</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A7%8B%E7%AF%89-%E4%BA%BA%E6%B0%97%E3%81%AE%E8%A8%98%E4%BA%8B"><span class="toc-number">3.</span> <span class="toc-text">構築 - 人気の記事</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#hexo-related-popular-posts-%E3%81%AE%E4%BF%AE%E6%AD%A3"><span class="toc-number">3.1.</span> <span class="toc-text">hexo-related-popular-posts の修正</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#freemind-%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E8%A8%AD%E5%AE%9A-1"><span class="toc-number">3.2.</span> <span class="toc-text">freemind テーマの設定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hexo-%E3%81%AE%E8%A8%AD%E5%AE%9A-1"><span class="toc-number">3.3.</span> <span class="toc-text">Hexo の設定</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9F%E8%A1%8C"><span class="toc-number">4.</span> <span class="toc-text">実行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8"><span class="toc-number">5.</span> <span class="toc-text">利用</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/21/Headless-Hyprland/" title="Headless Hyprland">Headless Hyprland</a><time datetime="2026-01-21T01:16:59.000Z" title="Created 2026-01-21 10:16:59">2026-01-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/29/oUF-MyLayout-Addon/" title="oUF MyLayout Addon">oUF MyLayout Addon</a><time datetime="2025-12-29T12:51:56.000Z" title="Created 2025-12-29 21:51:56">2025-12-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/21/Prism-Launcher/" title="Prism Launcher">Prism Launcher</a><time datetime="2025-12-21T12:31:02.000Z" title="Created 2025-12-21 21:31:02">2025-12-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/21/Systemd-user-timer/" title="Systemd user timer">Systemd user timer</a><time datetime="2025-12-20T18:59:19.000Z" title="Created 2025-12-21 03:59:19">2025-12-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/06/Faugus-Launcher/" title="Faugus Launcher">Faugus Launcher</a><time datetime="2025-12-06T06:14:20.000Z" title="Created 2025-12-06 15:14:20">2025-12-06</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/travel.png);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2010 - 2026 By ktkr3d</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null
  const getUtterancesTheme = theme => theme === 'dark' ? 'photon-dark' : 'github-light'

  const loadUtterances = (el = document, key) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyUtterances = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const config = {
      src: 'https://utteranc.es/client.js',
      repo: 'ktkr3d/ktkr3d.github.io',
      theme: getUtterancesTheme(document.documentElement.getAttribute('data-theme')),
      crossorigin: 'anonymous',
      async: true,
      ...option,
      'issue-term': isShuoshuo ? key : (option && option['issue-term']) || 'pathname'
    }

    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => ele.setAttribute(key, value))
    el.querySelector('#utterances-wrap').appendChild(ele)
  }

  const changeUtterancesTheme = theme => {
    const iframe = document.querySelector('#utterances-wrap iframe')
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: getUtterancesTheme(theme)
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es')
    }
  }

  btf.addGlobalFn('themeChange', changeUtterancesTheme, 'utterances')

  if (isShuoshuo) {
    'Utterances' === 'Utterances'
      ? window.shuoshuoComment = { loadComment: loadUtterances }
      : window.loadOtherComment = loadUtterances
    return
  }
  
  if ('Utterances' === 'Utterances' || !false) {
    if (false) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
    else loadUtterances()
  } else {
    window.loadOtherComment = loadUtterances
  }
})()</script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="local-search-input"><input placeholder="Search for Posts" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>