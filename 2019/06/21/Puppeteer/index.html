<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Puppeteer | Memorandum!</title><meta name="author" content="ktkr3d"><meta name="copyright" content="ktkr3d"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="https:&#x2F;&#x2F;github.com&#x2F;GoogleChrome&#x2F;puppeteer Puppeteer はGoogle Chrome を自動で操作するツールです。WSL2(Ubuntu 18.04)でPuppeteer をヘッドレスで動かしてみました。これは便利かもしれない！">
<meta property="og:type" content="article">
<meta property="og:title" content="Puppeteer">
<meta property="og:url" content="https://ktkr3d.github.io/2019/06/21/Puppeteer/index.html">
<meta property="og:site_name" content="Memorandum!">
<meta property="og:description" content="https:&#x2F;&#x2F;github.com&#x2F;GoogleChrome&#x2F;puppeteer Puppeteer はGoogle Chrome を自動で操作するツールです。WSL2(Ubuntu 18.04)でPuppeteer をヘッドレスで動かしてみました。これは便利かもしれない！">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png">
<meta property="article:published_time" content="2019-06-21T13:29:10.000Z">
<meta property="article:modified_time" content="2019-06-21T13:29:10.000Z">
<meta property="article:author" content="ktkr3d">
<meta property="article:tag" content="wsl">
<meta property="article:tag" content="puppeteer">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Puppeteer",
  "url": "https://ktkr3d.github.io/2019/06/21/Puppeteer/",
  "image": "https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png",
  "datePublished": "2019-06-21T13:29:10.000Z",
  "dateModified": "2019-06-21T13:29:10.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "ktkr3d",
      "url": "https://ktkr3d.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://ktkr3d.github.io/2019/06/21/Puppeteer/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-MG6LWTJBY0"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-MG6LWTJBY0')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-MG6LWTJBY0', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":false,"highlightLang":false,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Puppeteer',
  isHighlightShrink: undefined,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><script type="text/javascript" src="//www.google.com/jsapi"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/rss.xml" title="Memorandum!" type="application/rss+xml">
</head><body><div id="web_bg" style="background-color: rgb(227, 233, 199);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">475</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">184</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/rss.xml"><i class="fa-fw fas fa-rss"></i><span> Subscrive</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Memorandum!</span></a><a class="nav-page-title" href="/"><span class="site-name">Puppeteer</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/rss.xml"><i class="fa-fw fas fa-rss"></i><span> Subscrive</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Pages</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/archlinux/"><i class="fa-fw fa-solid fa-a"></i><span> Arch Linux</span></a></li><li><a class="site-page child" href="/GNOME/"><i class="fa-fw fa-solid fa-g"></i><span> GNOME</span></a></li><li><a class="site-page child" href="/hexo/"><i class="fa-fw fa-solid fa-h"></i><span> Hexo</span></a></li><li><a class="site-page child" href="/ubuntu/"><i class="fa-fw fa-brands fa-ubuntu"></i><span> Ubuntu</span></a></li><li><a class="site-page child" href="/Visual-Studio-Code/"><i class="fa-fw fa-solid fa-code"></i><span> Visual Studio Code</span></a></li><li><a class="site-page child" href="/World-of-Warcraft/"><i class="fa-fw fa-solid fa-gamepad"></i><span> World of Warcraft</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Puppeteer</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2019-06-21T13:29:10.000Z" title="Created 2019-06-21 22:29:10">2019-06-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2019-06-21T13:29:10.000Z" title="Updated 2019-06-21 22:29:10">2019-06-21</time></span></div><div class="meta-secondline"></div></div></div><article class="container post-content" id="article-container"><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/GoogleChrome/puppeteer">https://github.com/GoogleChrome/puppeteer</a></p>
<p>Puppeteer はGoogle Chrome を自動で操作するツールです。<br>WSL2(Ubuntu 18.04)でPuppeteer をヘッドレスで動かしてみました。<br>これは便利かもしれない！</p>
<span id="more"></span>

<h3 id="環境設定"><a href="#環境設定" class="headerlink" title="環境設定"></a>環境設定</h3><h4 id="利用環境"><a href="#利用環境" class="headerlink" title="利用環境"></a>利用環境</h4><ul>
<li>Windows 10 Pro Insider Preview (1903, 18917.1000)</li>
<li>WSL2 (Ubuntu 18.04)</li>
<li>node v10.16.0</li>
</ul>
<h4 id="Puppeteer-のインストール"><a href="#Puppeteer-のインストール" class="headerlink" title="Puppeteer のインストール"></a>Puppeteer のインストール</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm i puppeteer</span><br></pre></td></tr></table></figure>

<h4 id="実行時依存ライブラリのインストール-Ubuntu-18-04-の場合"><a href="#実行時依存ライブラリのインストール-Ubuntu-18-04-の場合" class="headerlink" title="実行時依存ライブラリのインストール(Ubuntu 18.04 の場合)"></a>実行時依存ライブラリのインストール(Ubuntu 18.04 の場合)</h4><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/GoogleChrome/puppeteer/issues/290#issuecomment-451471338">https://github.com/GoogleChrome/puppeteer/issues/290#issuecomment-451471338</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> apt-get install -y libx11-xcb1 libxrandr2 libasound2 libpangocairo-1.0-0 libatk1.0-0 libatk-bridge2.0-0 libgtk-3-0 libnss3 libxss1</span><br></pre></td></tr></table></figure>

<h3 id="実行"><a href="#実行" class="headerlink" title="実行"></a>実行</h3><h4 id="テストスクリプト"><a href="#テストスクリプト" class="headerlink" title="テストスクリプト"></a>テストスクリプト</h4><p><a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.google.com/">www.google.com</a> のスクリーンショットを採取するスクリプトです。</p>
<figure class="highlight javascript"><figcaption><span>test.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&#x27;puppeteer&#x27;</span>);</span><br><span class="line"></span><br><span class="line">puppeteer.<span class="title function_">launch</span>(&#123;</span><br><span class="line">  <span class="attr">headless</span>: <span class="literal">true</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">async</span> browser =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.<span class="title function_">newPage</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">setViewport</span>(&#123; <span class="attr">width</span>: <span class="number">1200</span>, <span class="attr">height</span>: <span class="number">800</span> &#125;);</span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">goto</span>(<span class="string">&#x27;https://www.google.co.jp/&#x27;</span>);</span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">screenshot</span>(&#123;<span class="attr">path</span>: <span class="string">&#x27;puppeteer_example.png&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">  browser.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="実行-1"><a href="#実行-1" class="headerlink" title="実行"></a>実行</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ node test.js</span><br></pre></td></tr></table></figure>

<h4 id="実行結果"><a href="#実行結果" class="headerlink" title="実行結果"></a>実行結果</h4><p><img src="/images/puppeteer_example.png" alt="puppeteer"></p>
<h3 id="よく使う操作"><a href="#よく使う操作" class="headerlink" title="よく使う操作"></a>よく使う操作</h3><h4 id="セレクタ"><a href="#セレクタ" class="headerlink" title="セレクタ"></a>セレクタ</h4><p>Chrome のデベロッパーツールでセレクタをコピーすると概ね正しい。</p>
<h4 id="プロキシ認証"><a href="#プロキシ認証" class="headerlink" title="プロキシ認証"></a>プロキシ認証</h4><h4 id="フォーム認証"><a href="#フォーム認証" class="headerlink" title="フォーム認証"></a>フォーム認証</h4><p>page.type()<br>page.type()<br>page.type()</p>
<h4 id="ページ遷移"><a href="#ページ遷移" class="headerlink" title="ページ遷移"></a>ページ遷移</h4><h4 id="フォームサブミット"><a href="#フォームサブミット" class="headerlink" title="フォームサブミット"></a>フォームサブミット</h4></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/wsl/">wsl</a><a class="post-meta__tags" href="/tags/puppeteer/">puppeteer</a></div><div class="post-share"><div class="social-share" data-image="https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png" data-sites="facebook,twitter,google"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2019/06/14/WSL2/" title="WSL 2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">WSL 2</div></div><div class="info-2"><div class="info-item-1">Windows Insider Program でWSL 2 が利用できるようになりましたので試してみました。 既存のWSL 環境をWSL 2 に変換しました。WSL 2 ではHyper-V を利用するようになったようですね。   1. Windows Insider Program へ登録https://insider.windows.com/ja-jp/上記のURL からWindows Insider Program に参加登録します。 2. Windows Update を実行Windows Update を実行すると以下の状態になりました。 エディション: Windows 10 Pro Insider Previewバージョン: 1903OSビルド: 18917.1000 3. VirtualMachinePlatform の有効化Windows PowerShell(管理者)モードから設定します。 PS C:\WINDOWS\system32&gt; Enable-WindowsOptionalFeature -Online -FeatureName...</div></div></div></a><a class="pagination-related" href="/2019/06/22/Compile-Kodi-for-Ubuntu/" title="Compile Kodi for Ubuntu"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Compile Kodi for Ubuntu</div></div><div class="info-2"><div class="info-item-1">https://github.com/Harekaze/pvr.chinachu/issues/30 Kodi 18.2 にバージョンアップしたらpvr.chinchu がうまく動かなくなってしまいました。Kodi のcurl 処理に変更があったようです。 $ curl -I 172.17.69.68:20772HTTP/1.1 200 OKAccept-Ranges: bytesLast-Modified: Mon, 03 Jun 2019 14:41:30 GMTContent-Length: 2311Content-Type: text/htmlServer: Chinachu (Node)Cache-Control: no-cacheX-Content-Type-Options: nosniffX-Frame-Options: SAMEORIGINX-UA-Compatible: IE=Edge,chrome=1X-XSS-Protection: 1; mode=blockDate: Sat, 22 Jun 2019 08:48:09 GMTConnection:...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2020/01/27/Puppeteer-on-WSL/" title="Puppeteer on WSL"><img class="cover" src="https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-01-27</div><div class="info-item-2">Puppeteer on WSL</div></div><div class="info-2"><div class="info-item-1">https://github.com/puppeteer/puppeteer/issues/1837 WSL のPuppeteer からWindows にインストールされたChrome(chrome.exe) を起動します。WSL 側にインストールするパッケージが少なくてすみそうです。   環境 WSL1(Ubuntu 18.04) on Windows 10 node v13.6.0 npm 6.13.4 puppeteer  構築node のインストール$ sudo apt update &amp;&amp; sudo apt upgrade$ sudo apt install nodejs npm$ sudo npm clean all$ sudo npm install n$ sudo n latest$ sudo ln -sf /usr/local/bin/node /usr/bin/node$ sudo apt purge nodejs npm$ sudo apt clean all$ sudo apt autoremove  puppeteer のインストール$...</div></div></div></a><a class="pagination-related" href="/2019/06/04/Chinachu-on-WSL/" title="WSL でChinachu"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-06-04</div><div class="info-item-2">WSL でChinachu</div></div><div class="info-2"><div class="info-item-1">https://github.com/Chinachu/Chinachu/wiki/Gamma-Installation-V2 Chinachu がWSL (Ubuntu 18.04)で普通に動きました。   現在の環境 Windows 10 Windows 10 でMirakurun を導入済 WSL (Ubuntu 18.04 が導入済でデフォルト)を導入済 WSL でnode.js を導入済  WSL でChinachu のインストール$ sudo apt-get install build-essential curl git-core vainfo$ sudo npm install pm2 -g$ sudo pm2 startup$ git clone git://github.com/kanreisa/Chinachu.git ~/chinachu$ cd ~/chinachu/$ ./chinachu installer$ cp config.sample.json config.json  ~&#x2F;chinachu&#x2F;config.json...</div></div></div></a><a class="pagination-related" href="/2019/06/14/WSL2/" title="WSL 2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-06-14</div><div class="info-item-2">WSL 2</div></div><div class="info-2"><div class="info-item-1">Windows Insider Program でWSL 2 が利用できるようになりましたので試してみました。 既存のWSL 環境をWSL 2 に変換しました。WSL 2 ではHyper-V を利用するようになったようですね。   1. Windows Insider Program へ登録https://insider.windows.com/ja-jp/上記のURL からWindows Insider Program に参加登録します。 2. Windows Update を実行Windows Update を実行すると以下の状態になりました。 エディション: Windows 10 Pro Insider Previewバージョン: 1903OSビルド: 18917.1000 3. VirtualMachinePlatform の有効化Windows PowerShell(管理者)モードから設定します。 PS C:\WINDOWS\system32&gt; Enable-WindowsOptionalFeature -Online -FeatureName...</div></div></div></a><a class="pagination-related" href="/2020/06/11/Windows-10-Build-19645-WSL-2/" title="Windows 10 Build 19645 + WSL 2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-11</div><div class="info-item-2">Windows 10 Build 19645 + WSL 2</div></div><div class="info-2"><div class="info-item-1">https://docs.microsoft.com/ja-jp/windows/wsl/wsl2-kernel Windows 10 Insider Preview Build 19645 をインストールしたらWSL2 が起動しなくなりました。Kernel の更新方法が変わったようです。 以下のMSI をインストールすると復帰しました。https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi 2020-06-18 追記Windows 10 Insider Preview Build 20150 へ更新することで、コマンドプロンプトからwsl --update で更新できるようになったようです。 C:\&gt;wsl --update更新をチェック中...利用できる更新はありません。カーネル バージョン: 4.19.104    環境 Windows 10 Insider Preview Build...</div></div></div></a><a class="pagination-related" href="/2020/06/19/WSL-Ubuntu-20-04-LTS/" title="WSL - Ubuntu 20.04 LTS"><img class="cover" src="https://assets.ubuntu.com/v1/29985a98-ubuntu-logo32.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-19</div><div class="info-item-2">WSL - Ubuntu 20.04 LTS</div></div><div class="info-2"><div class="info-item-1">WSL のUbuntu 20.04 LTS が公開されていたのでUbuntu 18.04 LTS から移行しました。 マイクロソフトストアには以下の3つのUbuntu が存在しています。「Ubuntu」からはdo-release-upgradeでバージョンアップできるけれど、「Ubuntu 18.04 LTS」からはバージョンアップできないんですね。  Ubuntu Ubuntu-18.04 Ubuntu-20.04    環境 Windows 10 Insider Preview Build 20150 移行前WSL Ubuntu 18.04 (Ubuntu 18.04 LTS) bash 4.4.20 node v13.9.0 npm 6.13.7 Docker version 19.03.6 Docker Compose version 1.24.0   移行後WSL Ubuntu (Ubuntu 20.04 LTS) bash 5.0.16 node v14.4.0 npm 6.14.5 Docker version 19.03.11 Docker Compose...</div></div></div></a><a class="pagination-related" href="/2020/07/06/USB-support-to-WSL2/" title="USB support to WSL2"><img class="cover" src="https://assets.ubuntu.com/v1/29985a98-ubuntu-logo32.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-06</div><div class="info-item-2">USB support to WSL2</div></div><div class="info-2"><div class="info-item-1">https://github.com/rpasek/usbip-wsl2-instructionshttps://github.com/cezanne/usbip-winhttps://snowstar.org/2020/06/14/wsl2-usb-via-usbip/WSL のカーネルをカスタムしてUSB デバイスにアクセスしてみました。 $ uname -r -v4.19.104-microsoft-standard #1 SMP Mon Jul 6 18:00:19 JST 2020$ lsusbBus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hubBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub    環境 セキュアブート無効 Windows 10 Insider Preview Build 20161 usbip-win 0.3.0 WSL2 (Ubuntu 20.04 LTS)    構築(Windows...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info-name">ktkr3d</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">475</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">184</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">31</div></a></div><a id="card-info-btn" target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/ktkr3d"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/ktkr3d" target="_blank" title="Github" rel="external nofollow noopener noreferrer"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://gist.github.com/ktkr3d" target="_blank" title="Gist" rel="external nofollow noopener noreferrer"><i class="fas fa-code" style="color: #24292e;"></i></a><a class="social-icon" href="https://x.com/ktkr3d" target="_blank" title="X" rel="external nofollow noopener noreferrer"><i class="fab fa-x-twitter" style="color: #24292e;"></i></a><a class="social-icon" href="/rss.xml" target="_blank" title="RSS"><i class="fas fa-rss" style="color: #f78c31;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%92%B0%E5%A2%83%E8%A8%AD%E5%AE%9A"><span class="toc-number">1.</span> <span class="toc-text">環境設定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E7%92%B0%E5%A2%83"><span class="toc-number">1.1.</span> <span class="toc-text">利用環境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Puppeteer-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><span class="toc-number">1.2.</span> <span class="toc-text">Puppeteer のインストール</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9F%E8%A1%8C%E6%99%82%E4%BE%9D%E5%AD%98%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB-Ubuntu-18-04-%E3%81%AE%E5%A0%B4%E5%90%88"><span class="toc-number">1.3.</span> <span class="toc-text">実行時依存ライブラリのインストール(Ubuntu 18.04 の場合)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9F%E8%A1%8C"><span class="toc-number">2.</span> <span class="toc-text">実行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%86%E3%82%B9%E3%83%88%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88"><span class="toc-number">2.1.</span> <span class="toc-text">テストスクリプト</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9F%E8%A1%8C-1"><span class="toc-number">2.2.</span> <span class="toc-text">実行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9F%E8%A1%8C%E7%B5%90%E6%9E%9C"><span class="toc-number">2.3.</span> <span class="toc-text">実行結果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%82%88%E3%81%8F%E4%BD%BF%E3%81%86%E6%93%8D%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">よく使う操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF"><span class="toc-number">3.1.</span> <span class="toc-text">セレクタ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7%E8%AA%8D%E8%A8%BC"><span class="toc-number">3.2.</span> <span class="toc-text">プロキシ認証</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E8%AA%8D%E8%A8%BC"><span class="toc-number">3.3.</span> <span class="toc-text">フォーム認証</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%9A%E3%83%BC%E3%82%B8%E9%81%B7%E7%A7%BB"><span class="toc-number">3.4.</span> <span class="toc-text">ページ遷移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%82%B5%E3%83%96%E3%83%9F%E3%83%83%E3%83%88"><span class="toc-number">3.5.</span> <span class="toc-text">フォームサブミット</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/01/calamares/" title="calamares">calamares</a><time datetime="2025-05-31T20:36:07.000Z" title="Created 2025-06-01 05:36:07">2025-06-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/28/archiso-gnome/" title="archiso-gnome">archiso-gnome</a><time datetime="2025-05-27T21:16:46.000Z" title="Created 2025-05-28 06:16:46">2025-05-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/26/archiso/" title="archiso">archiso</a><time datetime="2025-05-25T15:23:53.000Z" title="Created 2025-05-26 00:23:53">2025-05-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/21/AnduinOS/" title="AnduinOS">AnduinOS</a><time datetime="2025-05-21T13:33:48.000Z" title="Created 2025-05-21 22:33:48">2025-05-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/Reflector/" title="Reflector">Reflector</a><time datetime="2025-05-19T09:05:23.000Z" title="Created 2025-05-19 18:05:23">2025-05-19</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/travel.png);"><div id="footer-wrap"><div class="copyright">&copy;2010 - 2025 By ktkr3d</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>